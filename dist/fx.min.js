Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};d.prototype=this.prototype;e.prototype=new d;return e});Array.prototype.forEach||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;c<d;++c)a.call(b,this[c],c,this)});(function(a){for(var b=0,c=["ms","moz","webkit","o"],d=0;d<c.length&&!a.requestAnimationFrame;++d)a.requestAnimationFrame=a[c[d]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[c[d]+"CancelAnimationFrame"]||a[c[d]+"CancelRequestAnimationFrame"];if(void 0===a.requestAnimationFrame||!a.requestAnimationFrame)a.requestAnimationFrame=function(c,d){var g=a.performance.now(),h=Math.max(0,16-(g-b)),k=a.setTimeout(function(){c(g+h)},h);b=g+h;return k};if(void 0===a.cancelAnimationFrame||!a.cancelAnimationFrame)a.cancelAnimationFrame=
function(a){clearTimeout(a)}})(window);window.performance=window.performance||{};performance.now=function(){return performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()}}();Object.create||(Object.create=function(a){function b(){}if(1<arguments.length)throw Error("Object.create implementation only accepts the first parameter.");b.prototype=a;return new b});(function(a){var b={provide:function(a){a=a.split(".");var b=this,e,f;"fx"===a[0]&&(a=a.slice(1));e=a.length;for(f=0;f<e;f++)"undefined"==typeof b[a[f]]&&(b[a[f]]={}),b=b[a[f]];return b},getType:function(a){return b.Type.get(a)},hasClass:function(a,b){return a.className.match(RegExp("(\\s|^)"+b+"(\\s|$)"))},addClass:function(a,d){b.hasClass(a,d)||(d=d.replace(/(^\s+|\s+$)/g,""),a.className=a.className.replace(/(^\s+|\s+$)/g,""),a.className+=" "+d)},removeClass:function(a,d){b.hasClass(a,d)&&(a.className=
a.className.replace(RegExp("(\\s|^)"+d+"(\\s|$)")," "),a.className=a.className.replace(/(^\s+|\s+$)/g,""))},swapClass:function(a,d,e){b.removeClass(a,d);b.addClass(a,e)},documentReady:function(a,b){var e=!1,f=!0,g=a.document,h=g.documentElement,k=g.addEventListener?"addEventListener":"attachEvent",q=g.addEventListener?"removeEventListener":"detachEvent",m=g.addEventListener?"":"on",l=function(f){if(!("readystatechange"==f.type&&"complete"!=g.readyState)&&(("load"==f.type?a:g)[q](m+f.type,l,!1),!e&&
(e=!0)))b.call(a,f.type||f)},p=function(){try{h.doScroll("left")}catch(a){setTimeout(p,50);return}l("poll")};if("complete"==g.readyState)b.call(a,"lazy");else{if(g.createEventObject&&h.doScroll){try{f=!a.frameElement}catch(r){}f&&p()}g[k](m+"DOMContentLoaded",l,!1);g[k](m+"readystatechange",l,!1);a[k](m+"load",l,!1)}}};a.fx=b})(window);fx.ArrayIterator=function(a){if(!(this instanceof arguments.callee))throw Error("Constructor called as a function.");if(a&&"[object Array]"!==Object.prototype.toString.apply(a))throw new TypeError("fx.ArrayIterator expected data type Array for argument 'data'.");this.data=a||[];this.index=-1};
fx.ArrayIterator.prototype={next:function(){return this.hasNext()?this.data[++this.index]:null},previous:function(){return this.hasPrevious()?this.data[--this.index]:null},peekNext:function(){return this.hasNext()?this.data[this.index+1]:null},peekPrevious:function(){return this.hasPrevious()?this.data[this.index-1]:null},hasNext:function(){return this.isNull()?!1:this.index+1<this.data.length},hasPrevious:function(){return this.isNull()?!1:0<this.index},reset:function(){this.index=-1;return this},
getSize:function(){return this.data.length},isNull:function(){return 0===this.data.length},clone:function(){return new fx.ArrayIterator(this.data)},reverse:function(){if(this.isNull())return null;this.data.reverse();return this},shuffle:function(){if(this.isNull())return null;for(var a=this.data.length,b=a;b--;){var c=parseInt(Math.random()*a),d=this.data[b];this.data[b]=this.data[c];this.data[c]=d}return this},dump:function(){for(var a=this.toString()+" contains:\n",b=0;b<this.data.length;b++)a+=
"\n"+this.data[b];return a},toString:function(){var a="[ArrayIterator]";this.name&&(a+=" name: "+this.name+",");return a+=" size: "+this.getSize()+", index: "+this.index+", hasNext: "+this.hasNext()+", hasPrevious: "+this.hasPrevious()}};fx.ArrayIterator.Clone=function(a){return a.clone()};fx.HashMap=function(){if(!(this instanceof arguments.callee))throw Error("Constructor called as a function.");this.dict={};this.keys=[]};
fx.HashMap.prototype={add:function(a,b){this.dict[a]=b;this.keys.push(a)},get:function(a){return this.contains(a)?this.dict[a]:null},getValueByKey:function(a){return this.get(a)},getKeyByValue:function(a){for(var b in this.dict)if(this.dict.hasOwnProperty(b)&&this.dict[b]===a)return b;return null},contains:function(a){return!!this.dict[a]},random:function(){if(0===this.getSize())return null;var a=Math.floor(Math.random()*this.keys.length);return this.get(this.keys[a])},"delete":function(a){if(!this.contains(a))return!1;
delete this.dict[a];a=this.keys.indexOf(a);this.keys.splice(a,1);return!0},flush:function(){for(var a in this.dict)delete this.dict[a];this.dict={};this.keys=[]},getSize:function(){return this.keys.length},dump:function(){var a=this.toString()+" contains:\n",b;for(b in this.dict)a+="\nkey: "+b+", value: "+this.dict[b];return a},toString:function(){return"[HashMap] size: "+this.getSize()}};fx.Stack=function(a){if(!(this instanceof arguments.callee))throw Error("Constructor called as a function.");this._capacity=a||Number.MAX_VALUE;this._queue=[]};
fx.Stack.prototype={push:function(a){this._queue.length+1>this._capacity||this._queue.push(a)},pop:function(){return this._queue.pop()},peek:function(){return this._queue[0]},search:function(a){return this._queue.length&&a<this._queue.length?this._queue[a]:null},getSize:function(){return this._queue.length},getCapacity:function(){return this._capacity},isFull:function(){return this._queue.length==this._capacity},empty:function(){return!!this._queue.length},dump:function(){for(var a=this.toString()+
" contains:\n",b=0;b<this._queue.length;b++)a+="\nvalue: "+this._queue[b];return a},toArray:function(){return this._queue},toString:function(){var a="[Stack] size: "+this._queue.length;this._capacity!==Number.MAX_VALUE&&(a+=", capacity: "+this._capacity);return a}};fx.Queue=function(a){if(!(this instanceof arguments.callee))throw Error("Constructor called as a function.");this._capacity=a||Number.MAX_VALUE;this._queue=[]};
fx.Queue.prototype={push:function(a){this._queue.length+1>this._capacity&&this.pop();this._queue.push(a)},pushAt:function(a,b){this._queue.length+1>this._capacity&&this.pop();if(void 0==b)throw Error("Too few arguments.");this._queue[b]=a},pop:function(){return this._queue.shift()},peek:function(){return this._queue[0]},search:function(a){return this._queue.length&&i<this._queue.length?this._queue[a]:null},getSize:function(){return this._queue.length},getCapacity:function(){return this._capacity},
isFull:function(){return this._queue.length==this._capacity},empty:function(){return!!this._queue.length},dump:function(){for(var a=this.toString()+" contains:\n",b=0;b<this._queue.length;b++)a+="\nvalue: "+this._queue[b];return a},toArray:function(){return this._queue},toString:function(){var a="[Queue] size: "+this._queue.length;this._capacity!==Number.MAX_VALUE&&(a+=", capacity: "+this._capacity);return a}};fx.Sequencer=function(a,b){if(!(this instanceof arguments.callee))throw Error("Constructor called as a function.");if(!a)throw Error("Too few arguments.");this.size=a;this.index=-1;this.data=[];for(var c=b||0;c<this.size;c++)this.data[c]=c;return this};
fx.Sequencer.prototype={next:function(){return this.hasNext()?this.data[++this.index]:null},hasNext:function(){return this.index+1<this.data.length},reset:function(){this.index=-1},shuffle:function(){for(var a=this.data.length,b=a;b--;){var c=parseInt(Math.random()*a),d=this.data[b];this.data[b]=this.data[c];this.data[c]=d}return this},toString:function(){return"[Sequencer] size: "+this.size}};fx.Circle=function(a,b,c){if(!(this instanceof arguments.callee))throw Error("Constructor called as a function.");this.reset(a,b,c);this.regY=this.regX=0};
fx.Circle.prototype={reset:function(a,b,c){this.x=a||0;this.y=b||0;this.r=c||0;return this},intersectsCircle:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.r+a.r;return b*b+c*c<=a*a},pointInCircle:function(a){return a.x*a.x+a.y*a.y<this.r*this.r},draw:function(a){a.save();a.beginPath();a.arc(this.x-this.regX,this.y-this.regY,this.r,2*Math.PI,0,!0);a.fill();a.closePath();a.restore();return this},toString:function(){return"[Circle] x: "+this.x+", y: "+this.y+", r: "+this.r}};fx.Circle.Zero=function(){return new fx.Circle};
fx.Circle.isCircle=function(a){return a instanceof fx.Circle};fx.Line=function(a,b){if(!(this instanceof arguments.callee))throw Error("Constructor called as a function.");if(!fx.Point.IsPoint(a)||!fx.Point.IsPoint(b))throw Error("Argument a and b must be fx.Point objects.");this.reset(a,b)};
fx.Line.prototype={reset:function(a,b){this.a=a;this.b=b;return this},getLength:function(){return this.a.distanceTo(this.b)},intersectsLine:function(a){var b=this.a,c=this.b,d=a.a,e=a.b,f=(e.x-d.x)*(b.y-d.y)-(e.y-d.y)*(b.x-d.x);a=(c.x-b.x)*(b.y-d.y)-(c.y-b.y)*(b.x-d.x);d=(e.y-d.y)*(c.x-b.x)-(e.x-d.x)*(c.y-b.y);return 0!=d?(f/=d,a/=d,0<=f&&1>=f&&0<=a&&1>=a?new fx.Point(b.x+f*(c.x-b.x),b.y+f*(c.y-b.y)):null):0==f||0==a?fx.Line.COINCIDENT:fx.Line.PARALLEL},isParallel:function(a){return this.intersectsLine(a)===
fx.Line.PARALLEL},isCoincicent:function(a){return this.intersectsLine(a)===fx.Line.COINCIDENT},draw:function(a){a.save();a.beginPath();a.moveTo(this.a.x,this.a.y);a.lineTo(this.b.x,this.b.y);a.stroke();a.closePath();a.beginPath();a.arc(this.a.x,this.a.y,2,2*Math.PI,0,!0);a.arc(this.b.x,this.b.y,2,2*Math.PI,0,!0);a.fill();a.closePath();a.restore();return this},toString:function(){return"[Line] a: "+this.a.x+", "+this.a.y+",  b: "+this.b.x+", "+this.b.y+", length: "+this.getLength().toFixed(2)}};
fx.Line.Zero=function(){return new fx.Line};fx.Line.IsLine=function(a){return a instanceof fx.Line};fx.Line.PARALLEL="parallel";fx.Line.COINCIDENT="coincicent";fx.Point=function(a,b){if(!(this instanceof arguments.callee))throw Error("Constructor called as a function");this.reset(a,b)};
fx.Point.prototype={reset:function(a,b){this.x=a||0;this.y=b||0;return this},add:function(a,b){this.x+=a;this.y+=b;return this},subtract:function(a,b){this.x-=a;this.y-=b;return this},multiply:function(a,b){this.x*=a;this.y*=b;return this},divide:function(a){this.x/=a;this.y/=a;return this},round:function(){this.x|=0;this.y|=0;return this},translate:function(a,b){this.x*=b.width/a.width;this.y*=b.height/a.height;return this},clone:function(){return new fx.Point(this.x,this.y)},interpolate:function(a,
b){return new fx.Point(this.x+b*(a.x-this.x),this.y+b*(a.y-this.y))},distanceTo:function(a){return Math.abs(Math.sqrt((a.x-this.x)*(a.x-this.x)+(a.y-this.y)*(a.y-this.y)))},angleBetween:function(a){return Math.atan2(a.x-this.x,a.y-this.y)},equals:function(a){return a.x===this.x&&a.y===this.y},draw:function(a,b){var c=b||3;a.save();a.translate(this.x+c/2,this.y+c/2);a.fillRect(-c,-c,c,c);a.restore();return this},toString:function(){return"[Point] x: "+this.x+", y: "+this.y}};
fx.Point.Zero=function(){return new fx.Point(0,0)};fx.Point.DistanceTo=function(a,b){return a.distanceTo(b)};fx.AngleBetween=function(a,b){return a.angleBetween(b)};fx.Point.Interpolate=function(a,b,c){return a.interpolate(b,c)};fx.Point.IsPoint=function(a){return a instanceof fx.Point};fx.Rectangle=function(a,b,c,d){if(!(this instanceof arguments.callee))throw Error("Constructor called as a function");this.reset(a,b,c,d);this.regY=this.regX=0};
fx.Rectangle.prototype={reset:function(a,b,c,d){this.x=a||0;this.y=b||0;this.width=c||0;this.height=d||0;return this},getTopLeft:function(){return new fx.Point(this.getLeft(),this.getTop())},getTopRight:function(){return new fx.Point(this.getRight(),this.getTop())},getBottomLeft:function(){return new fx.Point(this.getLeft(),this.getBottom())},getBottomRight:function(){return new fx.Point(this.getRight(),this.getBottom())},getCenter:function(){return new fx.Point(this.width/2,this.height/2)},getTop:function(){return this.y},
getBottom:function(){return this.y+this.height},getLeft:function(){return this.x},getRight:function(){return this.x+this.width},round:function(){this.x|=0;this.y|=0;this.width|=0;this.height|=0;return this},inflate:function(a,b){this.x-=a;this.width+=2*a;this.y-=b;this.height+=2*b},scale:function(a){this.reset(this.x,this.y,this.width*a,this.height*a);return this},intersects:function(a){return!!this.intersection(a)},intersection:function(a){var b=this.x-this.regX,c=this.y-this.regY,d=this.width,e=
this.height,f=a.x-a.regX,g=a.y-a.regY,h=a.width,k=a.height;a=Math.max(b,f);b=Math.min(b+d,f+h);return a<=b&&(d=Math.max(c,g),c=Math.min(c+e,g+k),d<=c)?new fx.Rectangle(a,d,b-a,c-d):null},translatePoint:function(a,b){return new fx.Point(a.x*(b.width/this.width),a.y*(b.height/this.height))},containsPoint:function(a){return!(a.x<this.x||a.x>this.x+this.width||a.y<this.y||a.y>this.y+this.height)},draw:function(a,b){b=b||!1;a.save();a.translate(this.x,this.y);b?a.fillRect(-this.regX,-this.regY,this.width,
this.height):a.strokeRect(-this.regX,-this.regY,this.width,this.height);a.restore()},clone:function(){return new fx.Rectangle(this.x,this.y,this.width,this.height)},toString:function(){return"[Rectangle] x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height}};fx.Rectangle.TranslatePoint=function(a,b,c){return new fx.Point(a.x*(c.width/b.width),a.y*(c.height/b.height))};fx.Rectangle.Zero=function(){return new fx.Rectangle};
fx.Rectangle.IsRectangle=function(a){return a instanceof fx.Rectangle};fx.Spline=function(a,b,c,d){this.points=a;this.tension=b||0.5;this.closed=c||!1;this.debug=d||!1};
fx.Spline.prototype={draw:function(a){var b=[],c=this.points.length;if(0!=c){if(this.closed){this.points.push(this.points[0],this.points[1],this.points[2],this.points[3]);this.points.unshift(this.points[c-1]);this.points.unshift(this.points[c-1]);for(var d=0;d<c;d+=2)b=b.concat(this.getControlPoints(this.points[d],this.points[d+1],this.points[d+2],this.points[d+3],this.points[d+4],this.points[d+5],this.tension));b=b.concat(b[0],b[1]);for(d=2;d<c+2;d+=2)a.beginPath(),a.moveTo(this.points[d],this.points[d+
1]),a.bezierCurveTo(b[2*d-2],b[2*d-1],b[2*d],b[2*d+1],this.points[d+2],this.points[d+3]),a.stroke(),a.closePath(),this.debug&&(this.drawControlLine(a,this.points[d],this.points[d+1],b[2*d-2],b[2*d-1]),this.drawControlLine(a,this.points[d+2],this.points[d+3],b[2*d],b[2*d+1]))}else{for(d=0;d<c-4;d+=2)b=b.concat(this.getControlPoints(this.points[d],this.points[d+1],this.points[d+2],this.points[d+3],this.points[d+4],this.points[d+5],this.tension));for(d=2;d<c-5;d+=2)a.beginPath(),a.moveTo(this.points[d],
this.points[d+1]),a.bezierCurveTo(b[2*d-2],b[2*d-1],b[2*d],b[2*d+1],this.points[d+2],this.points[d+3]),a.stroke(),a.closePath(),this.debug&&(this.drawControlLine(a,this.points[d],this.points[d+1],b[2*d-2],b[2*d-1]),this.drawControlLine(a,this.points[d+2],this.points[d+3],b[2*d],b[2*d+1]));a.beginPath();a.moveTo(this.points[0],this.points[1]);a.quadraticCurveTo(b[0],b[1],this.points[2],this.points[3]);a.stroke();a.closePath();a.beginPath();a.moveTo(this.points[c-2],this.points[c-1]);a.quadraticCurveTo(b[2*
c-10],b[2*c-9],this.points[c-4],this.points[c-3]);a.stroke();a.closePath();this.debug&&(this.drawControlLine(a,this.points[2],this.points[3],b[0],b[1]),this.drawControlLine(a,this.points[c-4],this.points[c-3],b[2*c-10],b[2*c-9]))}if(this.debug)for(d=0;d<c;d+=2)this.drawPoint(a,this.points[d],this.points[d+1]);return this}},drawPoint:function(a,b,c){a.save();a.beginPath();a.fillStyle="#666666";a.arc(b,c,4,0,2*Math.PI,!1);a.closePath();a.fill();a.restore()},drawControlLine:function(a,b,c,d,e){a.save();
a.beginPath();a.lineWidth=1;a.strokeStyle="#666666";a.moveTo(b,c);a.lineTo(d,e);a.closePath();a.stroke();this.drawPoint(a,d,e);a.restore()},getControlPoints:function(a,b,c,d,e,f,g){var h=Math.sqrt(Math.pow(c-a,2)+Math.pow(d-b,2)),k=Math.sqrt(Math.pow(e-c,2)+Math.pow(f-d,2)),h=g*h/(h+k);g-=h;return[c+h*(a-e),d+h*(b-f),c-g*(a-e),d-g*(b-f)]},toString:function(){return"[Spline] numPoints: "+this.points.length+", tension: "+this.tension+", closed: "+this.closed+", debug draw: "+this.debug}};
fx.Spline.PointsToNumbers=function(a){var b=[];if(!a||void 0===a)throw Error("fx.Spline: Missing argument points.");if(fx.Type.isArray(a)){if(4>a.length)return console.warn("fx.Spline: Too few arguments: At least 3 points is required to draw a Spline"),a;if(fx.Type.isNumber(a[0])&&fx.Type.isNumber(a[1]))return a;if("x"in a[0]&&"y"in a[0]){for(var c=0;c<a.length;c++)b.push(a[c].x,a[c].y);return b}throw Error("fx.Spline: Points Array does not contain valid Point objects.");}throw Error("fx.Spline: Type Array expected for argument points");
};fx.Spline.IsSpline=function(a){return a instanceof fx.Spline};fx.Vector2=function(a,b){if(!(this instanceof arguments.callee))throw Error("Constructor called as a function");this.reset(a,b)};
fx.Vector2.prototype={add:function(a){this.x+=a.x;this.y+=a.y;return this},subtract:function(a){this.x-=a.x;this.y-=a.y;return this},multiply:function(a){this.x*=a;this.y*=a;return this},divide:function(a){this.x/=a;this.y/=a;return this},reverse:function(){this.x=-this.x;this.y=-this.y;return this},copyTo:function(a){a.x=this.x;a.y=this.y},copyFrom:function(a){this.x=a.x;this.y=a.y},reset:function(a,b){this.x=a||0;this.y=b||0;return this},normalize:function(){var a=1/this.magnitude();this.x*=a;this.y*=
a;return this},project:function(a){var b=this.dot(a)/a.dot(a);return a.multiply(b)},perpendicular:function(a){return this.subtract(this.project(a))},angleBetween:function(a,b){return Math.acos(this.dot(a)/(this.magnitude()*a.magnitude()))*(b?1:fx.Vector2.TO_DEGREES)},angle:function(a){return Math.atan2(this.y,this.x)*(a?1:fx.Vector2.TO_DEGREES)},rotate:function(a,b){var c=Math.cos(a*(b?1:fx.Vector2.TO_RADIANS)),d=Math.sin(a*(b?1:fx.Vector2.TO_RADIANS)),e=this.x,f=this.y;this.x=e*c-f*d;this.y=e*d+
f*c;return this},dot:function(a){return this.x*a.x+this.y*a.y},magnitude:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},distanceTo:function(a){var b=a.x-this.x;a=a.y-this.y;return Math.sqrt(b*b+a*a)},round:function(){this.x|=0;this.y|=0},equals:function(a){return this.x===a.x&&this.y===a.y},clone:function(){return new fx.Vector2(this.x,this.y)},draw:function(a){a.save();a.lineWidth=2;a.beginPath();a.moveTo(0,0);a.lineTo(this.x,this.y);a.strokeStyle="rgba(0, 0, 0, 0.25)";a.stroke();a.closePath();
a.translate(this.x,this.y);var b="x: "+this.x.toFixed(2)+", y: "+this.y.toFixed(2)+", mag: "+this.magnitude().toFixed(0);a.fillText(b,5,2);a.closePath();a.beginPath();a.rotate(this.angle(!0));a.moveTo(0,0);a.lineTo(-10,10);a.moveTo(0,0);a.lineTo(-10,-10);a.strokeStyle="rgba(0, 0, 0, 0.25)";a.stroke();a.closePath();a.fillText(this.angle().toFixed(1)+"\u00b0",-50,-5);a.restore();return this},toString:function(){return"[Vector2] x: "+this.x.toFixed(2)+", y: "+this.y.toFixed(2)+", magnitude: "+this.magnitude().toFixed(2)+
", angleDeg: "+this.angle().toFixed(2)}};fx.Vector2.AngleToVector2=function(a,b,c){var d=Math.cos(a*(c?1:fx.Vector2.TO_RADIANS))*b;a=Math.sin(a*(c?1:fx.Vector2.TO_RADIANS))*b;return new fx.Vector2(d,a)};fx.Vector2.Distance=function(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)};fx.Vector2.Zero=function(){return new fx.Vector2(0,0)};fx.Vector2.FromPoint=function(a){return new fx.Vector2(a.x,a.y)};fx.Vector2.isVector2=function(a){return a instanceof fx.Vector2};fx.Vector2.TO_DEGREES=180/Math.PI;
fx.Vector2.TO_RADIANS=Math.PI/180;fx.Math={roundFloat:function(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c},clamp:function(a,b,c){return Math.min(Math.max(c,Math.min(a,b)),Math.max(a,b))},fallsBetween:function(a,b,c){return c>=a&&c<=b},isEven:function(a){return this.isNumber(a)&&0==a%2},isOdd:function(a){return this.isNumber(n)&&1==n%2},isNumber:function(a){return a===parseFloat(a)&&"[object Number]"===Object.prototype.toString.apply(a)},random:function(a,b,c){a=a||0;b=b||1;c=c||!1;a=isNaN(a)||isNaN(b)?Math.random():a+Math.random()*
(b-a);return c?a|0:a},randomExclude:function(a,b,c,d,e){var f;a=a||0;b=b||1;c=c||0;d=d||0;e=e||!1;do f=a+Math.random()*(b-a);while(f>c&&f<d);return e?f|0:f}};fx.Percent={of:function(a,b){return b*(a/100)},from:function(a,b){return 100*(a/b)},decimalToPercent:function(a){return 100*a},rangeToPercent:function(a,b,c){return 100*((c-a)/(b-a))},rangeToDecimal:function(a,b,c){return(b-a)/100*c}};fx.Range=function(a,b){if(!(this instanceof arguments.callee))throw Error("Constructor called as a function.");this.start=a||0;this.end=b||1};
fx.Range.prototype={map:function(a){this.start*=a;this.end*=a;return this},getPercentOfValue:function(a){return 100*((a-this.start)/(this.end-this.start))},getValueOfPercent:function(a){return(this.end-this.start)/100*a+this.start},inRange:function(a){return this.start<this.end?a>=this.start&&a<=this.end:a<=this.start&&a>=this.end},reset:function(a,b){this.start=a;this.end=b},getMin:function(){return Math.min(this.start,this.end)},getMax:function(){return Math.max(this.start,this.end)},clone:function(){return new fx.Range(this.start,
this.end)},equals:function(a){return this.start===a.start&&this.end===a.end},toString:function(){return"[Range] start: "+this.start+", end: "+this.end}};fx.Oscillator=function(a,b,c,d){this.start=a||0;this.end=b||1;this.step=c||0.1;this.reverse=d;this.easing=easing;this.value=a;void 0===this.reverse&&(this.reversed=!1)};
fx.Oscillator.prototype={update:function(){this.value+=this.step;this.value>=this.end?this.reverse?this.step=-this.step:this.reset():this.value<=this.start&&(this.step=Math.abs(this.step),this.value=this.start)},hasNext:function(){return this.reverse?!0:this.value+this.step<=this.end},toRange:function(){return new fx.Range(this.min,this.max)},getNumSteps:function(){return Math.abs(this.end-this.start)/this.step},reset:function(){this.value=this.start},toString:function(){return"[Oscillator] value: "+
this.value.toFixed(2)+", start: "+this.start+", end: "+this.end+", step: "+this.step+", numSteps: "+this.getNumSteps().toFixed(2)+", reverse: "+this.reverse}};fx.Timer=function(a,b){if(!(this instanceof arguments.callee))throw Error("Constructor called as a function.");if(!window.requestAnimationFrame||!window.cancelAnimationFrame)throw Error("requestAnimationFrame and cancelAnimationFrame are required for Timer");if("[object Array]"===Object.prototype.toString.apply(a)){if(2!==a.length)throw Error("Parameter 'Time' used as random range must contain excactly two numerical values: start and end");if("[object Number]"!==Object.prototype.toString.apply(a[0])||
"[object Number]"!==Object.prototype.toString.apply(a[1]))throw Error("Time parameter 'min' and 'max' must be numerical");this.min=a[0];this.max=a[1];this.isRandomize=!0}else if("[object Number]"===Object.prototype.toString.apply(a))this.time=a;else throw Error("Accepted values for parameter 'time' are Number and Array.");if(!b)throw Error("Missing required parameter 'notify'.");this.notify=b;this.tick=this.id=0;this.paused=this.running=!1;this.context=this;this.usePresicionTimer=!!window.performance.now;
var c=this;window.performance=window.performance||{};performance.now=function(){return performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()}}();this._getRndInterval=function(){return this.min+Math.random()*(this.max-this.min)};this._onNotify=function(){c.notify.call(c.context);c.tick++;c.isRandomize&&(clearTimeout(c.id),c.id=setTimeout(c._onNotify,c._getRndInterval()))}};
fx.Timer.prototype={_tick:function(){},start:function(){if(this.running||this.paused)return this;this.running=!0;this.id=this.isRandomize?setTimeout(this._onNotify,this._getRndInterval()):setInterval(this._onNotify,this.time);return this},stop:function(){if(!this.running)return this;clearInterval(this.id);clearTimeout(this.id);this.paused=this.running=!1;return this},pause:function(){if(this.paused||!this.running)return this;this.paused=!0;clearInterval(this.id);clearTimeout(this.id);return this},
resume:function(){if(!this.paused)return this;this.paused=!1;this.running&&(this.id=this.isRandomize?setTimeout(this._onNotify,this._getRndInterval()):setInterval(this._onNotify,this.time));return this},reset:function(){this.tick=0;return this},bind:function(a){this.context=a;return this},destroy:function(){this.stop();this.context=this.notify=null},toString:function(){var a;a="[Timer] time: "+(this.isRandomize?this.min+"-"+this.max:this.time);return a+=", running: "+this.running+", paused: "+this.paused+
", tick: "+this.tick+", usePresicionTimer: "+this.usePresicionTimer}};fx.RAFTimer=function(a,b,c){if(!(this instanceof arguments.callee))throw Error("Constructor called as a function.");if(!window.requestAnimationFrame||!window.cancelAnimationFrame)throw Error("requestAnimationFrame and cancelAnimationFrame are required for RAFTimer.");if(a){if(isNaN(a))throw Error("Parameter 'duration' is not a Number.");if(!b)throw Error("Missing required parameter 'notify'.");}else throw Error("Missing required parameter 'duration'.");this.usePresicionTimer=!!window.performance&&
!!window.performance.now;this.duration=a;this.notify=b;this.useFrames=c||!1;this.requestId=0;this.paused=this.running=!1;this.ms=Infinity;this.count=this.currentFrame=this.currentTime=0;this.maxDeltaTime=160;var d,e=this;this._callback=function(){e.currentTime=e.duration;e.count++;e.lastTime=0;e.reset();e.notify.call(e)};this._tick=function(){if(e.running&&!e.paused){e.useFrames?e.currentFrame==e.duration&&e._callback():e.currentTime>=e.duration&&e._callback();var a=performance.now();e.ms=a-(d||a);
e.ms>e.maxDeltaTime&&(e.ms=0);d=a;e.currentTime+=e.ms;e.currentFrame++;e.requestId=requestAnimationFrame(e._tick)}}};
fx.RAFTimer.prototype={start:function(){!this.running&&!this.paused&&(this.running=!0,this.requestId=requestAnimationFrame(this._tick))},stop:function(){this.running&&(this.paused=this.running=!1,this.reset(),cancelAnimationFrame(this.requestId))},pause:function(){!this.paused&&this.running&&(this.paused=!0)},resume:function(){this.paused&&(this.paused=!1,this.requestId=requestAnimationFrame(this._tick))},getFormattedTime:function(){return(this.currentTime/1E3).toFixed(2)},reset:function(){this.currentFrame=
this.currentTime=0},rafActive:function(){return this.ms<this.maxDeltaTime},destroy:function(){this.stop();this.duration=this.notify=null},toString:function(){var a="[RAFTimer] ",a=this.useFrames?a+("duration(frames): "+this.duration+", currentFrame: "+this.currentFrame):a+("duration(ms): "+this.duration+", currentTime: "+this.getFormattedTime()),a=a+(", count: "+this.count+", running: "+this.running+", paused: "+this.paused);this.useFrames||(a+=", precisionTimer: "+this.usePresicionTimer);return a}};fx.CanvasUtils={canvasToImage:function(a,b,c,d,e){if(!a)throw new TypeError("Not enough arguments");var f=new Image;f.src=fx.CanvasUtils.getBase64(a,b,c,d,e);return f},copy:function(a,b){if(!a||!b)throw new TypeError("Not enough arguments");b.getContext("2d").putImageData(fx.CanvasUtils.getImageData(a),0,0)},imageDataToImage:function(a,b){if(!a)throw new TypeError("Not enough arguments");var c=fx.CanvasUtils.getCanvas(a.width,a.height);c.getContext("2d").putImageData(a,0,0);if(b)b.src=fx.CanvasUtils.getBase64(c);
else return fx.CanvasUtils.canvasToImage(c);return null},videoToImage:function(a,b,c,d,e){if(!a)throw new TypeError("Not enough arguments");var f=fx.CanvasUtils._getRect(a);b=fx.CanvasUtils._getRect(a,b,c,d,e);c=fx.CanvasUtils.getCanvas(f.width,f.height);c.getContext("2d").drawImage(a,f.x,f.y,f.width,f.height);return fx.CanvasUtils.canvasToImage(c,b.x,b.y,b.width,b.height)},videoToCanvas:function(a,b){if(!a||!b)throw new TypeError("Not enough arguments");b.drawImage(a,0,0,a.width,a.height)},putImage:function(a,
b,c,d,e,f){if(!a||!b)throw new TypeError("Not enough arguments");c=fx.CanvasUtils._getRect(null,c,d,e,f);a.getContext("2d").drawImage(b,c.x,c.y,c.width,c.height)},getBase64:function(a,b,c,d,e){if(!a)throw new TypeError("Not enough arguments");var f=fx.CanvasUtils._getRect(null,0,0,a.width,a.height),g=fx.CanvasUtils._getRect(a,b,c,d,e);f.equals(g)||(a=fx.CanvasUtils.crop(a,b,c,d,e));d=fx.CanvasUtils.getImageData(a,b||0,c||0,d,e);a.getContext("2d").putImageData(d,b||0,c||0);return a.toDataURL()},base64toImage:function(a,
b){if(!a)throw new TypeError("Not enough arguments");if("string"!==typeof a)throw new TypeError("Invalid argument");if(b&&!b instanceof HTMLImageElement)throw new TypeError("Invalid argument");(b||new Image).src=mbase64;return b},crop:function(a,b,c,d,e){if(!a)throw new TypeError("Not enough arguments");b=parseInt(b,10);c=parseInt(c,10);d=d||a.width;var f=e||a.height;isNaN(b)&&(b=0);isNaN(c)&&(c=0);if(0==b&&0==c&&d==a.width&&f==a.height)return fx.CanvasUtils.clone(a);e=fx.CanvasUtils.getCanvas(d,
f);var g=e.getContext("2d");a=fx.CanvasUtils.getImageData(a,b,c,d,f);g.putImageData(a,0,0);return e},cropImageData:function(a,b,c,d,e){if(!a)throw new TypeError("Not enough arguments");var f=fx.CanvasUtils.getCanvas(a.width,a.height);f.getContext("2d").putImageData(a,0,0);return fx.CanvasUtils.getImageData(f,b,c,d,e)},getImageData:function(a,b,c,d,e){if(!a)throw new TypeError("Not enough arguments");if(!a instanceof HTMLCanvasElement)throw new TypeError("Invalid type "+a);b=parseInt(b,10)||0;c=parseInt(c,
10)||0;d=d||a.width;e=e||a.height;return a.getContext("2d").getImageData(b,c,d,e)},getImageData2:function(a){if(!a)throw new TypeError("Not enough arguments");var b;if(a instanceof HTMLCanvasElement)b=a.getContext("2d"),a=b.getImageData(0,0,a.width,a.height);else if(a instanceof CanvasRenderingContext2D)a=a.getImageData(0,0,a.canvas.width,a.canvas.height);else if(a instanceof HTMLImageElement||a instanceof HTMLVideoElement)b=fx.CanvasUtils.getCanvas(a.width,a.height),b=b.getContext("2d"),b.drawImage(a,
0,0),a=b.getImageData(0,0,a.width,a.height);else throw new TypeError("Invalid arguments");return a},getCanvas:function(a,b){var c=document.createElement("canvas");c.width=a||300;c.height=b||150;return c},clone:function(a){if(!a)throw new TypeError("Not enough arguments");if(!a.width||!a.height)throw new TypeError("Canvas has no properties");var b=fx.CanvasUtils.getCanvas(a.width,a.height),c=b.getContext("2d");a=a.getContext("2d").getImageData(0,0,a.width,a.height);c.putImageData(a,0,0);return b},
isSupported:function(){var a,b;try{a=document.createElement("canvas"),b=a.getContext("2d")}catch(c){return!1}try{b.getImageData(0,0,1,1)}catch(d){return!1}return!0},_getRect:function(a,b,c,d,e){a||(a={width:0,height:0});return{x:parseInt(b,10)||0,y:parseInt(c,10)||0,width:parseInt(d,10)||a.width,height:parseInt(e,10)||a.height,equals:function(a){return a.x==this.x&&a.y==c&&a.width==this.width&&a.height==this.height},toString:function(){return"[Rect] x: "+this.x+", y: "+this.y+", width: "+this.width+
", height: "+this.height}}}};fx.CookieUtils={set:function(a,b){var c=this._trim(a)+"="+this._trim(b.toString());return document.cookie=c},get:function(a,b){var c=document.cookie.match(this._trim(a)+"=(.*?)(;|$)");return c?b?this._toBool(c[1]):c[1]:null},has:function(a){return!!this.get(this._trim(a))},"delete":function(a){if(!this.has(a))return!1;a=this._trim(a);document.cookie=a+("=;"+fx.CookieUtils.EXPIRES);return!0},flush:function(){for(var a=document.cookie.split(";"),b=0;b<a.length;b++){var c=a[b],d=c.indexOf("="),c=-1<
d?c.substr(0,d):c;document.cookie=(c+"=;"+fx.CookieUtils.EXPIRES).toString()}},dump:function(){var a=document.cookie.split(";"),b;if(1==a.length&&0==a[0].length)return"No cookies found in document";b=a.length.toString()+" cookie(s) found in document:\n";for(var c=0;c<a.length;c++){var d=a[c],e=d.split("=")[0],d=d.split("=")[1];b+="["+c.toString()+"] "+this._trim(e)+" = "+d+"\n"}return b},_trim:function(a){return a.replace(/^\s+|\s+$/g,"")},_toBool:function(a){if(!a||0==a.length)return!1;switch(a){case "true":case "1":case "yes":return!0;
default:return!1}}};fx.CookieUtils.EXPIRES="expires=Thu, 01 Jan 1970 00:00:00 GMT";fx.Date={daysBetween:function(a,b){return(a.valueOf()-b.valueOf())/1E3/60/60/24},isBefore:function(a,b){return!!(0>this.daysBetween(a,b))},isAfter:function(a,b){return!!(0<this.daysBetween(a,b))},isBetween:function(a,b,c){return!this.isBefore(a,b)&&!this.isAfter(a,c)},today:function(){return new Date},tomorrow:function(){return fx.Date.today().setDate(fx.Date.today().getDate()+1)},yesterday:function(a){return fx.Date.today().setDate(fx.Date.today().getDate()-1)},getMeridiem:function(a){return 12>
a?"AM":"PM"}};fx.Scale={keepAspect:function(a,b,c){b/c<a.width/a.height?(a.style.height="100%",a.style.width="auto"):(a.style.width="100%",a.style.height="auto")},element:function(a,b,c){a.style.width=a.width*(b||1)+"px";a.style.height=a.height*(c||1)+"px"},videoFullScreenKeepAspect:function(a,b,c){var d=window.innerWidth,e=window.innerHeight;b=a.videoWidth||b||1280;c=a.videoHeight||c||720;var f=b/c*e,g=e,h=-((f-d)/2),k=-((g-e)/2);f<d&&(g=c/b*d,f=d,k=-((g-e)/2),h=-((f-d)/2));a.width=~~f;a.height=~~g;a.style.top=
~~k+"px";a.style.left=~~h+"px"}};fx.Geom={degToRad:function(a){return a*(Math.PI/180)},radToDeg:function(a){return a*(180/Math.PI)},percentToDeg:function(a){return 3.6*a},percentToRad:function(a){return 3.6*a*(Math.PI/180)},radToPercent:function(a){return 100*(a*(180/Math.PI)/360)%100},degToPercent:function(a){return 100*(a/360)%100},distance:function(a,b,c,d){return Math.abs(Math.sqrt((c-a)*(c-a)+(d-b)*(d-b)))},lerp:function(a,b,c){return a+c*(b-a)},lerpPoints:function(a,b,c){return new fx.Point(a.x+c*(b.x-a.x),a.y+c*(b.y-a.y))},
map:function(a,b){return a*b},mapPoint:function(a,b){return new fx.Point(this.map(a.x,b),this.map(a.y,b))},getAngle:function(a,b){return Math.atan((a.y-b.y)/(a.x-b.x))/(Math.PI/180)},getRectanglePerimeter:function(a,b){return 2*a+2*b},getRadian:function(a,b){return Math.atan2(b.y-a.y,b.x-a.x)},getPolar:function(a,b,c){return{x:c*Math.cos(b)+a.x,y:c*Math.sin(b)+a.y}},rotatePoint:function(a,b,c){c=this.degToRad(c);var d=a.x-b.x;a=a.y-b.y;return{x:Math.cos(c)*d-Math.sin(c)*a+b.x,y:Math.sin(c)*d+Math.cos(c)*
a+b.y}},getPointInCircle:function(a,b){return{x:Math.cos(b)*a,y:Math.sin(b)*a}},getCircumferencePoint:function(a,b,c){a-=c;b-=c;var d=Math.sqrt(c*c/(1+a*a/(b*b)));c=Math.sqrt(c*c-d*d);return 0<a&&0<b?{x:c,y:d}:0>a&&0>b?{x:-c,y:-d}:0>a&&0<b?{x:-c,y:d}:0<a&&0>b?{x:c,y:-d}:{x:c,y:d}}};fx.DelayCall=function(a,b,c){if(!(this instanceof arguments.callee))throw Error("Constructor called as a function.");if(!b)throw Error("Missing required parameter time.");if(!a)throw Error("Missing required parameter callback.");c=c||window;var d=setTimeout(function(){a&&(a.call(c),a=null)},b);this.cancel=function(){d&&(clearTimeout(d),a=d=null)}};fx.Keycode={BACKSPACE:8,TAB:9,ENTER:13,COMMAND:15,SHIFT:16,CONTROL:17,ALTERNATE:18,PAUSE:19,CAPS_LOCK:20,NUMPAD:21,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,NUMBER_0:48,NUMBER_1:49,NUMBER_2:50,NUMBER_3:51,NUMBER_4:52,NUMBER_5:53,NUMBER_6:54,NUMBER_7:55,NUMBER_8:56,NUMBER_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,LEFT_WINDOW_KEY:91,RIGHT_WINDOW_KEY:92,
SELECT_KEY:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_ADD:107,NUMPAD_ENTER:108,NUMPAD_SUBTRACT:109,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,SEMICOLON:186,EQUAL:187,COMMA:188,MINUS:189,PERIOD:190,SLASH:191,BACKQUOTE:192,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221,
QUOTE:222};fx.Mouse={getPos:function(a){var b={x:NaN,y:NaN,event:null},c=a.target,d,e;if(!a||!a.target)return b;a.pageX||a.pageY?(d=a.pageX,e=a.pageY):(d=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e=a.clientY+document.body.scrollTop+document.documentElement.scrollTop);d-=c.offsetLeft;e-=c.offsetTop;b.x=d;b.y=e;b.event=a;0>b.x&&(b.x=0);0>b.y&&(b.y=0);return b}};fx.Object={getKeys:function(a){var b=[],c;for(c in a)b.push(c);return b},getValues:function(a){var b=[],c;for(c in a)b.push(a[c]);return b},length:function(a){var b=0,c;for(c in a)b++;return b},isEmpty:function(a){return 0===this.length(a)},isObject:function(a){return"[object Object]"===Object.prototype.toString.apply(a)},toHashMap:function(a){var b=[],c;for(c in a)b[c]=a[c];return b},toArray:function(a){var b=[],c;for(c in a)b.push(c),b.push(a[c]);return b},toMultidimensionalArray:function(a){var b=
[],c;for(c in a)b.push([c,a[c]]);return b},clone:function(a){var b={},c;for(c in a)b[c]=a[c];return b}};fx.QueryString={get:function(a){a="[\\?&]"+a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]")+"=([^&#]*)";return(a=RegExp(a).exec(window.location.search))?decodeURIComponent(a[1].replace(/\+/g," ")):null},has:function(a){return!!this.get(a)}};fx.String={trim:function(a){return a.replace(/^\s*/,"").replace(/\s*$/,"")},startsWith:function(a,b){return this.isEmpty(a)?!1:0==a.indexOf(b)},endsWith:function(a,b){return this.isEmpty(a)||this.isEmpty(b)?!1:a.lastIndexOf(b)==a.length-b.length},isEmpty:function(a){return this.isString&&0<a.length},isString:function(a){return"[object String]"===Object.prototype.toString.apply(o)},isDigit:function(a){this.isString(a)||(a=a.toString());return a.test(/^\d*$/)},contains:function(a,b){return b&&-1!=b.indexOf(a)},
removeWhitespace:function(a){return this.isEmpty(a)?a:a.replace(/\s/g,"")},insertAt:function(a,b,c){return a.substring(0,c)+b+a.substring(c)},toTitleCase:function(a){if(this.isEmpty(a))return a;var b=a.substring(0,1).toUpperCase();1<a.length&&(b+=a.substring(1));return b},formatNumber:function(a){a=a.toString();var b=a.split(".");a=b[0];for(var b=1<b.length?"."+b[1]:"",c=/(\d+)(\d{3})/;c.test(a);)a=a.replace(c,"$1,$2");return a+b},cacheBuster:function(a,b){return b?a:a+"?noCache="+Math.round(1E5*
Math.random()*(new Date).getMilliseconds())},catches:function(a,b,c){c=3<=arguments.length?c:!1;b=this.trim(b);b=b.replace(/\s+/,"*");b=b.replace(/\*/,".*?");b=b.replace(/\?/,".{0,1}");return RegExp("^"+b,c?"i":"").test(a)},toTimeCode:function(a){var b=Math.floor(a/3600),c=Math.floor(a%3600/60);a=Math.floor(a%3600%60);return(0==b?"":10>b?"0"+b.toString()+":":b.toString()+":")+(10>c?"0"+c.toString():c.toString())+":"+(10>a?"0"+a.toString():a.toString())}};fx.System={touch:function(){return"createTouch"in document},canvas:function(){try{return!!document.createElement("canvas").getContext}catch(a){return!1}},webgl:function(){if(!this.canvas())return!1;for(var a=["webgl","experimental-webgl","moz-webgl","webkit-3d"],b=document.createElement("canvas"),c,d=0;d<a.length;d++)try{if(c=b.getContext(a[d]))return!0}catch(e){}return!1},html5Video:function(){return!!document.createElement("video").canPlayType},html5Audio:function(){return!!document.createElement("audio").canPlayType},
localStorage:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}},webWorkers:function(){return!!window.Worker},geoLocation:function(){return!!("geolocation"in navigator)},applicationCache:function(){return!!window.applicationCache},history:function(){return!(!window.history||!history.pushState)},webRTC:function(){return!(!navigator.getUserMedia&&!navigator.webkitGetUserMedia&&!navigator.mozGetUserMedia&&!navigator.msGetUserMedia)},getUserMedia:function(){return this.webRTC()},
webAudio:function(){return!!("AudioContext"in window||"webkitAudioContext"in window)}};fx.Type={get:function(a){return!a||void 0==a?"[object Undefined]":null===a?"[object Null]":Object.prototype.toString.apply(a)},isObject:function(a){return"[object Object]"===this.get(a)},isArray:function(a){return"[object Array]"===this.get(a)},isFunction:function(a){return"[object Function]"===this.get(a)},isString:function(a){return"[object String]"===this.get(a)},isNumber:function(a){return"[object Number]"===this.get(a)},isBoolean:function(a){return"[object Boolean]"===this.get(a)},isUndefined:function(a){return"[object Undefined]"===
this.get(a)},isNull:function(a){return"[object Null]"===this.get(a)}};fx.Uri={isUrl:function(a){return 0===a.indexOf("http")||0===a.indexOf("www")},getExtension:function(a){a=this.parse(a).source;a=a.substring(a.lastIndexOf(".")+1,a.length);return this.stripQueryString(a)},stripExtension:function(a){if(this.isUrl(a))if(parsedUrl=this.parse(a),parsedUrl.file)a=parsedUrl.file;else return"";return a.split(".")[0]},stripQueryString:function(a){return decodeURIComponent(a).split("?")[0]},getFileName:function(a){return this.stripQueryString(this.parse(a).file)},parseHashTag:function(){var a,
b,c;a={};b=window.location.hash;b=b.replace("#","");c=b.split("/");a.hash=b;a.parts=[];a.length=c.length;for(b=0;b<c.length;b++)a.parts[b]=c[b];return a},parse:function(a){a=a||window.location;var b="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(a);
for(var c={},d=14;d--;)c[b[d]]=a[d]||"";c.queryKey={};c[b[12]].replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,b,d){b&&(c.queryKey[b]=d)});return c},toUri:function(a){var b="";a.protocol&&(b+=a.protocol+"://");a.user&&(b+=a.user);a.password&&(b+=":"+a.password);if(a.user||a.password)b+="@";a.host&&(b+=a.host);a.port&&(b+=":"+a.port);a.path&&(b+=a.path);var c=a.queryKey,d=[],e;for(e in c)if(c.hasOwnProperty(e)){var f=encodeURIComponent(c[e]);e=encodeURIComponent(e);f?d.push(e+"="+f):d.push(e)}0<d.length&&
(b+="?"+d.join("&"));a.anchor&&(b+="#"+a.anchor);return b}};
