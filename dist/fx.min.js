(function(a){var b=a.document,c=function(a,b){return new c.fn.init(a,b,c)};c.provide=function(a){var a=a.split("."),b=this,c,g;"fx"===a[0]&&(a=a.slice(1));c=a.length;for(g=0;g<c;g++)"undefined"==typeof b[a[g]]&&(b[a[g]]={}),b=b[a[g]];return b};c.getType=function(a){return c.Type.get(a)};c.hasAttribute=function(a,b){if(a.hasAttribute)return a.hasAttribute(b);a.getAttribute&&a.getAttribute(b)};c.hasPrefix=function(a,b){if("[object String]"!==c.getType(a))return!1;for(var b=b.split(""),f=0;f<b.length;f++)if(a.substring(0,
1)===b[f])return!0;return!1};c.isQuery=function(a){return c.hasPrefix(a,":#")||c.Type.isObject(a)?!0:!1};c.isNode=function(a){return c.Type.isArray(a)||c.Type.isFunction(a)||c.Type.isString(a)||c.Type.isNumber(a)||c.Type.isBoolean(a)||c.Type.isUndefined(a)||c.Type.isNull(a)?!1:"nodeType"in a&&"nodeName"in a};c.isElement=function(a){return!c.isNode(a)?!1:1===a.nodeType};c.isDocument=function(a){return!c.isNode(a)?!1:9===a.nodeType};c.createElement=function(a){return c.isElement(a)?a:new c.Element(a)};
c.isElement=function(a){return a instanceof c.Element};c.isHTMLString=function(a){return c.Type.isString(a)&&"<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length};c.hasClass=function(a,b){return a.className.match(RegExp("(\\s|^)"+b+"(\\s|$)"))};c.addClass=function(a,b){c.hasClass(a,b)||(b=b.replace(/(^\s+|\s+$)/g,""),a.className=a.className.replace(/(^\s+|\s+$)/g,""),a.className+=" "+b)};c.removeClass=function(a,b){c.hasClass(a,b)&&(a.className=a.className.replace(RegExp("(\\s|^)"+b+"(\\s|$)"),
" "),a.className=a.className.replace(/(^\s+|\s+$)/g,""))};c.swapClass=function(a,b,f){c.removeClass(a,b);c.addClass(a,f)};c.documentReady=function(a,b){var c=!1,g=!0,h=a.document,m=h.documentElement,l=h.addEventListener?"addEventListener":"attachEvent",j=h.addEventListener?"removeEventListener":"detachEvent",q=h.addEventListener?"":"on",p=function(g){if(!("readystatechange"==g.type&&"complete"!=h.readyState)&&(("load"==g.type?a:h)[j](q+g.type,p,!1),!c&&(c=!0)))b.call(a,g.type||g)},r=function(){try{m.doScroll("left")}catch(a){setTimeout(r,
50);return}p("poll")};if("complete"==h.readyState)b.call(a,"lazy");else{if(h.createEventObject&&m.doScroll){try{g=!a.frameElement}catch(s){}g&&r()}h[l](q+"DOMContentLoaded",p,!1);h[l](q+"readystatechange",p,!1);a[l](q+"load",p,!1)}};c.fn=c.prototype={constructor:c,init:function(a,c,f){if(a){if(f.isElement(a))return a}else return[];c=c||b.body;if(f.isQuery(a))a=f.Dom.find(c,a);else return f.createElement(a);return a?f.createElement(a):[]}};a.fx=c})(window);
(function(a){a.performance=a.performance||{};performance.now=performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()}})(window);
(function(a){for(var b=0,c=["ms","moz","webkit","o"],d=0;d<c.length&&!a.requestAnimationFrame;++d)a.requestAnimationFrame=a[c[d]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[c[d]+"CancelAnimationFrame"]||a[c[d]+"CancelRequestAnimationFrame"];if(void 0===a.requestAnimationFrame||!a.requestAnimationFrame)a.requestAnimationFrame=function(c){var d=a.performance.now(),g=Math.max(0,16-(d-b)),h=a.setTimeout(function(){c(d+g)},g);b=d+g;return h};if(void 0===a.cancelAnimationFrame||!a.cancelAnimationFrame)a.cancelAnimationFrame=
function(a){clearTimeout(a)}})(window);Object.create||(Object.create=function(a){function b(){}if(1<arguments.length)throw Error("Object.create implementation only accepts the first parameter.");b.prototype=a;return new b});fx.ArrayIterator=function(a){if(!(this instanceof arguments.callee))throw Error("Constructor called as a function.");if(a&&"[object Array]"!==Object.prototype.toString.apply(a))throw new TypeError("fx.ArrayIterator expected data type Array for argument 'data'.");this.data=a||[];this.index=-1};
fx.ArrayIterator.prototype={next:function(){return this.hasNext()?this.data[++this.index]:null},previous:function(){return this.hasPrevious()?this.data[--this.index]:null},peekNext:function(){return this.hasNext()?this.data[this.index+1]:null},peekPrevious:function(){return this.hasPrevious()?this.data[this.index-1]:null},hasNext:function(){return this.isNull()?!1:this.index+1<this.data.length},hasPrevious:function(){return this.isNull()?!1:0<this.index},reset:function(){this.index=-1;return this},
getSize:function(){return this.data.length},isNull:function(){return 0===this.data.length},clone:function(){return new fx.ArrayIterator(this.data)},reverse:function(){if(!this.isNull())return this.data.reverse(),this},shuffle:function(){if(!this.isNull()){for(var a=this.data.length,b=a;b--;){var c=parseInt(Math.random()*a),d=this.data[b];this.data[b]=this.data[c];this.data[c]=d}return this}},dump:function(){for(var a=this.toString()+" contains:\n",b=0;b<this.data.length;b++)a+="\n"+this.data[b];return a},
toString:function(){var a="[ArrayIterator]";this.name&&(a+=" name: "+this.name+",");return a+=" size: "+this.getSize()+", index: "+this.index+", hasNext: "+this.hasNext()+", hasPrevious: "+this.hasPrevious()}};fx.ArrayIterator.Clone=function(a){return a.clone()};fx.HashMap=function(){if(!(this instanceof arguments.callee))throw Error("Constructor called as a function.");this.dict={};this.keys=[]};
fx.HashMap.prototype={add:function(a,b){this.dict[a]=b;this.keys.push(a)},get:function(a){return this.contains(a)?this.dict[a]:null},getValueByKey:function(a){return this.get(a)},getKeyByValue:function(a){for(var b in this.dict)if(this.dict.hasOwnProperty(b)&&this.dict[b]===a)return b;return null},contains:function(a){return!!this.dict[a]},random:function(){if(0===this.getSize())return null;var a=Math.floor(Math.random()*this.keys.length);return this.get(this.keys[a])},"delete":function(a){if(!this.contains(a))return!1;
delete this.dict[a];a=this.keys.indexOf(a);this.keys.splice(a,1);return!0},flush:function(){for(var a in this.dict)delete this.dict[a];this.dict={};this.keys=[]},getSize:function(){return this.keys.length},dump:function(){var a=this.toString()+" contains:\n",b;for(b in this.dict)a+="\nkey: "+b+", value: "+this.dict[b];return a},toString:function(){return"[HashMap] size: "+this.getSize()}};fx.Stack=function(a){if(!(this instanceof arguments.callee))throw Error("Constructor called as a function.");this._capacity=a||Number.MAX_VALUE;this._queue=[]};
fx.Stack.prototype={push:function(a){this._queue.length+1>this._capacity||this._queue.push(a)},pop:function(){return this._queue.pop()},peek:function(){return this._queue[0]},search:function(a){return this._queue.length&&a<this._queue.length?this._queue[a]:null},getSize:function(){return this._queue.length},getCapacity:function(){return this._capacity},isFull:function(){return this._queue.length==this._capacity},empty:function(){return!!this._queue.length},dump:function(){for(var a=this.toString()+
" contains:\n",b=0;b<this._queue.length;b++)a+="\nvalue: "+this._queue[b];return a},toArray:function(){return this._queue},toString:function(){var a="[Stack] size: "+this._queue.length;this._capacity!==Number.MAX_VALUE&&(a+=", capacity: "+this._capacity);return a}};fx.Queue=function(a){if(!(this instanceof arguments.callee))throw Error("Constructor called as a function.");this._capacity=a||Number.MAX_VALUE;this._queue=[]};
fx.Queue.prototype={push:function(a){this._queue.length+1>this._capacity&&this.pop();this._queue.push(a)},pushAt:function(a,b){this._queue.length+1>this._capacity&&this.pop();if(void 0==b)throw Error("Too few arguments.");this._queue[b]=a},pop:function(){return this._queue.shift()},peek:function(){return this._queue[0]},search:function(a){return this._queue.length&&i<this._queue.length?this._queue[a]:null},getSize:function(){return this._queue.length},getCapacity:function(){return this._capacity},
isFull:function(){return this._queue.length==this._capacity},empty:function(){return!!this._queue.length},dump:function(){for(var a=this.toString()+" contains:\n",b=0;b<this._queue.length;b++)a+="\nvalue: "+this._queue[b];return a},toArray:function(){return this._queue},toString:function(){var a="[Queue] size: "+this._queue.length;this._capacity!==Number.MAX_VALUE&&(a+=", capacity: "+this._capacity);return a}};fx.Sequencer=function(a,b){if(!a)throw Error("Too few arguments.");if(!(this instanceof arguments.callee))throw Error("Constructor called as a function.");this.size=a;this.index=-1;this.data=[];for(var c=b||0;c<this.size;c++)this.data[c]=c;return this};
fx.Sequencer.prototype={next:function(){return this.hasNext()?this.data[++this.index]:null},hasNext:function(){return this.index+1<this.data.length},reset:function(){this.index=-1},shuffle:function(){for(var a=this.data.length,b=a;b--;){var c=parseInt(Math.random()*a),d=this.data[b];this.data[b]=this.data[c];this.data[c]=d}return this},toString:function(){return"[Sequencer] size: "+this.size}};fx.Element=function(a){this.css=function(a){for(var b in a)this.domElement.style[b]=a[b];return this};this.opacity=function(a){this.css({"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity="+100*a+"')",filter:"alpha(opacity="+100*a+")","-moz-opacity":a,"-khtml-opacity":a,opacity:a});return this};this.html=function(a){this.innerHTMLappend+=a;return this};this.exec=function(){this.innerHTMLappend&&(this.domElement.innerHTML+=this.innerHTMLappend,this.innerHTMLappend="");return this};this.clearCSS=
function(){this.domElement.style="";return this};this.attr=function(a,b){this.domElement.setAttribute(a,b);return this};this.id=function(a){this.domElement.setAttribute("id",a);return this};this.addClass=function(a){this.domElement.className=a;return this};this.text=function(a){a=document.createTextNode(a);this.domElement.appendChild(a);return this};this.prependChild=function(){return this};this.appendChild=function(a){for(var b=0;b<arguments.length;b++)a=arguments[b],fx.isElement(a)?this.domElement.appendChild(a.domElement):
this.domElement.appendChild(a);return this};this.appendTo=function(a){fx.isElement(a)?a.domElement.appendChild(this.domElement):a.appendChild(this.domElement);return this};this.prependTo=function(){return this};this.find=function(a){return fx.Dom.find(this,a)};this.firstChild=function(){return 0==this.numChildren()?null:this.domElement.children[0]};this.lastChild=function(){return 0==this.numChildren()?null:this.domElement.children[this.numChildren()-1]};this.children=function(){return this.domElement.children};
this.numChildren=function(){return this.domElement.children.length};this.hasChildAt=function(a){return void 0!=this.domElement.children[a]};this.getChildAt=function(a){return this.domElement.children[a]};this.hasChildren=function(){return 0<this.domElement.children.length};this.toString=function(){var a="[fx Element]";fx.hasAttribute(this,"id")&&(a+=" id: "+this.domElement.getAttribute("id"));this.hasChildren()&&(a+=", numChildren: "+this.numChildren());return a};var b=a||"div";if(fx.isDocumentNode(b))this.domElement=
document.body;else if(fx.isElementNode(b))this.domElement=b;else if(fx.Type.isString(a))this.domElement=document.createElement(b);else if(fx.isfxNode(b))this.domElement=b.domElement;else throw Error("Invalid selector: "+a);this.innerHTMLappend="";return fx.isElement(this)?this:fx.createElement(b)};fx.Image=function(a,b){this.isLoaded=!1;this.ctx=this.canvas=null;var b=b||{},c=this;this.image=new Image;this.image.onload=function(a){c.isLoaded=!0;c.image.onload=null;c.image.onerror=null;c.image.onabort=null;b.onload&&b.onload.call(this,a);b.target&&b.target.appendChild(c.image)};this.image.onerror=function(a){b.onerror&&b.onerror.call(this,a)};this.image.onabort=function(a){b.onabort&&b.onabort.call(this,a)};this.image.src=a};
fx.Image.prototype={remove:function(){this.image.parentNode&&this.image.parentNode.removeChild(this.image)},getCanvas:function(){if(this.canvas)return this.canvas;if(this.isLoaded){var a;try{a=!!document.createElement("canvas").getContext}catch(b){return null}if(a)return this.canvas=document.createElement("canvas")}else console.warn("Cannot create canvas or image data until image is fully loaded.");return null},getImageData:function(){if(!this.isLoaded)return console.warn("Cannot return ImageData since image has not yet fully loaded."),
null;var a=this.getCanvas(),b,c;if(!a)return console.warn("Cannot return ImageData since Canvas is unsupported."),null;b=a.getContext("2d");if(!b)return console.warn("Cannot return ImageData since CanvasRenderingContext2d is unsupported."),null;try{b.drawImage(this.image,0,0,this.image.width,this.image.height),c=b.getImageData(0,0,a.width,a.height)}catch(d){return null}return c}};fx.Circle=function(a,b,c){if(!(this instanceof arguments.callee))throw Error("Constructor called as a function.");this.reset(a,b,c);this.regY=this.regX=0};
fx.Circle.prototype={reset:function(a,b,c){this.x=a||0;this.y=b||0;this.r=c||0;return this},intersectsCircle:function(a){var b=this.x-a.x,c=this.y-a.y,a=this.r+a.r;return b*b+c*c<=a*a},pointInCircle:function(a){return a.x*a.x+a.y*a.y<this.r*this.r},draw:function(a){a.save();a.beginPath();a.arc(this.x-this.regX,this.y-this.regY,this.r,2*Math.PI,0,!0);a.fill();a.closePath();a.restore();return this},toString:function(){return"[Circle] x: "+this.x+", y: "+this.y+", r: "+this.r}};fx.Circle.Zero=function(){return new fx.Circle};
fx.Circle.isCircle=function(a){return a instanceof fx.Circle};fx.Line=function(a,b){if(!(this instanceof arguments.callee))throw Error("Constructor called as a function.");if(!fx.Point.IsPoint(a)||!fx.Point.IsPoint(b))throw Error("Argument a and b must be fx.Point objects.");this.reset(a,b)};
fx.Line.prototype={reset:function(a,b){this.a=a;this.b=b;return this},getLength:function(){return this.a.distanceTo(this.b)},intersectsLine:function(a){var b=this.a,c=this.b,d=a.a,e=a.b,f=(e.x-d.x)*(b.y-d.y)-(e.y-d.y)*(b.x-d.x),a=(c.x-b.x)*(b.y-d.y)-(c.y-b.y)*(b.x-d.x),d=(e.y-d.y)*(c.x-b.x)-(e.x-d.x)*(c.y-b.y);return 0!=d?(f/=d,a/=d,0<=f&&1>=f&&0<=a&&1>=a?new fx.Point(b.x+f*(c.x-b.x),b.y+f*(c.y-b.y)):null):0==f||0==a?fx.Line.COINCIDENT:fx.Line.PARALLEL},isParallel:function(a){return this.intersectsLine(a)===
fx.Line.PARALLEL},isCoincicent:function(a){return this.intersectsLine(a)===fx.Line.COINCIDENT},draw:function(a){a.save();a.beginPath();a.moveTo(this.a.x,this.a.y);a.lineTo(this.b.x,this.b.y);a.stroke();a.closePath();a.beginPath();a.arc(this.a.x,this.a.y,2,2*Math.PI,0,!0);a.arc(this.b.x,this.b.y,2,2*Math.PI,0,!0);a.fill();a.closePath();a.restore();return this},toString:function(){return"[Line] a: "+this.a.x+", "+this.a.y+",  b: "+this.b.x+", "+this.b.y+", length: "+this.getLength().toFixed(2)}};
fx.Line.Zero=function(){return new fx.Line};fx.Line.IsLine=function(a){return a instanceof fx.Line};fx.Line.PARALLEL="parallel";fx.Line.COINCIDENT="coincicent";fx.Point=function(a,b){if(!(this instanceof arguments.callee))throw Error("Constructor called as a function");this.reset(a,b)};
fx.Point.prototype={reset:function(a,b){this.x=a||0;this.y=b||0;return this},add:function(a,b){this.x+=a;this.y+=b;return this},subtract:function(a,b){this.x-=a;this.y-=b;return this},multiply:function(a,b){this.x*=a;this.y*=b;return this},divide:function(a){this.x/=a;this.y/=a;return this},round:function(){this.x|=0;this.y|=0;return this},translate:function(a,b){this.x*=b.width/a.width;this.y*=b.height/a.height;return this},clone:function(){return new fx.Point(this.x,this.y)},interpolate:function(a,
b){return new fx.Point(this.x+b*(a.x-this.x),this.y+b*(a.y-this.y))},distanceTo:function(a){return Math.abs(Math.sqrt((a.x-this.x)*(a.x-this.x)+(a.y-this.y)*(a.y-this.y)))},angleBetween:function(a){return Math.atan2(a.x-this.x,a.y-this.y)},equals:function(a){return a.x===this.x&&a.y===this.y},draw:function(a,b){var c=b||3;a.save();a.translate(this.x+c/2,this.y+c/2);a.fillRect(-c,-c,c,c);a.restore();return this},toString:function(){return"[Point] x: "+this.x+", y: "+this.y}};
fx.Point.Zero=function(){return new fx.Point(0,0)};fx.Point.DistanceTo=function(a,b){return a.distanceTo(b)};fx.AngleBetween=function(a,b){return a.angleBetween(b)};fx.Point.Interpolate=function(a,b,c){return a.interpolate(b,c)};fx.Point.IsPoint=function(a){return a instanceof fx.Point};fx.Rectangle=function(a,b,c,d){if(!(this instanceof arguments.callee))throw Error("Constructor called as a function");this.reset(a,b,c,d);this.regY=this.regX=0};
fx.Rectangle.prototype={reset:function(a,b,c,d){this.x=a||0;this.y=b||0;this.width=c||0;this.height=d||0;return this},getTopLeft:function(){return new fx.Point(this.getLeft(),this.getTop())},getTopRight:function(){return new fx.Point(this.getRight(),this.getTop())},getBottomLeft:function(){return new fx.Point(this.getLeft(),this.getBottom())},getBottomRight:function(){return new fx.Point(this.getRight(),this.getBottom())},getCenter:function(){return new fx.Point(this.width/2,this.height/2)},getTop:function(){return this.y},
getBottom:function(){return this.y+this.height},getLeft:function(){return this.x},getRight:function(){return this.x+this.width},round:function(){this.x|=0;this.y|=0;this.width|=0;this.height|=0;return this},inflate:function(a,b){this.x-=a;this.width+=2*a;this.y-=b;this.height+=2*b},scale:function(a){this.reset(this.x,this.y,this.width*a,this.height*a);return this},intersects:function(a){return!!this.intersection(a)},intersection:function(a){var b=this.x-this.regX,c=this.y-this.regY,d=this.width,e=
this.height,f=a.x-a.regX,g=a.y-a.regY,h=a.width,m=a.height,a=Math.max(b,f),b=Math.min(b+d,f+h);return a<=b&&(d=Math.max(c,g),c=Math.min(c+e,g+m),d<=c)?new fx.Rectangle(a,d,b-a,c-d):null},translatePoint:function(a,b){return new fx.Point(a.x*(b.width/this.width),a.y*(b.height/this.height))},containsPoint:function(a){return!(a.x<this.x||a.x>this.x+this.width||a.y<this.y||a.y>this.y+this.height)},getCenter:function(){return new fx.Point(this.width/2,this.height/2)},draw:function(a,b){b=b||!1;a.save();
a.translate(this.x,this.y);b?a.fillRect(-this.regX,-this.regY,this.width,this.height):a.strokeRect(-this.regX,-this.regY,this.width,this.height);a.restore()},clone:function(){return new fx.Rectangle(this.x,this.y,this.width,this.height)},toString:function(){return"[Rectangle] x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height}};fx.Rectangle.TranslatePoint=function(a,b,c){return new fx.Point(a.x*(c.width/b.width),a.y*(c.height/b.height))};fx.Rectangle.Zero=function(){return new fx.Rectangle};
fx.Rectangle.IsRectangle=function(a){return a instanceof fx.Rectangle};fx.Spline=function(a,b,c,d){this.points=a;this.tension=b||0.5;this.closed=c||!1;this.debug=d||!1};
fx.Spline.prototype={draw:function(a){var b=[],c=this.points.length;if(0!=c){if(this.closed){this.points.push(this.points[0],this.points[1],this.points[2],this.points[3]);this.points.unshift(this.points[c-1]);this.points.unshift(this.points[c-1]);for(var d=0;d<c;d+=2)b=b.concat(this.getControlPoints(this.points[d],this.points[d+1],this.points[d+2],this.points[d+3],this.points[d+4],this.points[d+5],this.tension));b=b.concat(b[0],b[1]);for(d=2;d<c+2;d+=2)a.beginPath(),a.moveTo(this.points[d],this.points[d+
1]),a.bezierCurveTo(b[2*d-2],b[2*d-1],b[2*d],b[2*d+1],this.points[d+2],this.points[d+3]),a.stroke(),a.closePath(),this.debug&&(this.drawControlLine(a,this.points[d],this.points[d+1],b[2*d-2],b[2*d-1]),this.drawControlLine(a,this.points[d+2],this.points[d+3],b[2*d],b[2*d+1]))}else{for(d=0;d<c-4;d+=2)b=b.concat(this.getControlPoints(this.points[d],this.points[d+1],this.points[d+2],this.points[d+3],this.points[d+4],this.points[d+5],this.tension));for(d=2;d<c-5;d+=2)a.beginPath(),a.moveTo(this.points[d],
this.points[d+1]),a.bezierCurveTo(b[2*d-2],b[2*d-1],b[2*d],b[2*d+1],this.points[d+2],this.points[d+3]),a.stroke(),a.closePath(),this.debug&&(this.drawControlLine(a,this.points[d],this.points[d+1],b[2*d-2],b[2*d-1]),this.drawControlLine(a,this.points[d+2],this.points[d+3],b[2*d],b[2*d+1]));a.beginPath();a.moveTo(this.points[0],this.points[1]);a.quadraticCurveTo(b[0],b[1],this.points[2],this.points[3]);a.stroke();a.closePath();a.beginPath();a.moveTo(this.points[c-2],this.points[c-1]);a.quadraticCurveTo(b[2*
c-10],b[2*c-9],this.points[c-4],this.points[c-3]);a.stroke();a.closePath();this.debug&&(this.drawControlLine(a,this.points[2],this.points[3],b[0],b[1]),this.drawControlLine(a,this.points[c-4],this.points[c-3],b[2*c-10],b[2*c-9]))}if(this.debug)for(d=0;d<c;d+=2)this.drawPoint(a,this.points[d],this.points[d+1]);return this}},drawPoint:function(a,b,c){a.save();a.beginPath();a.fillStyle="#666666";a.arc(b,c,4,0,2*Math.PI,!1);a.closePath();a.fill();a.restore()},drawControlLine:function(a,b,c,d,e){a.save();
a.beginPath();a.lineWidth=1;a.strokeStyle="#666666";a.moveTo(b,c);a.lineTo(d,e);a.closePath();a.stroke();this.drawPoint(a,d,e);a.restore()},getControlPoints:function(a,b,c,d,e,f,g){var h=Math.sqrt(Math.pow(c-a,2)+Math.pow(d-b,2)),m=Math.sqrt(Math.pow(e-c,2)+Math.pow(f-d,2)),h=g*h/(h+m),g=g-h;return[c+h*(a-e),d+h*(b-f),c-g*(a-e),d-g*(b-f)]},toString:function(){return"[Spline] numPoints: "+this.points.length+", tension: "+this.tension+", closed: "+this.closed+", debug draw: "+this.debug}};
fx.Spline.PointsToNumbers=function(a){var b=[];if(!a||void 0===a)throw Error("fx.Spline: Missing argument points.");if(fx.Type.isArray(a)){if(4>a.length)return console.warn("fx.Spline: Too few arguments: At least 3 points is required to draw a Spline"),a;if(fx.Type.isNumber(a[0])&&fx.Type.isNumber(a[1]))return a;if("x"in a[0]&&"y"in a[0]){for(var c=0;c<a.length;c++)b.push(a[c].x,a[c].y);return b}throw Error("fx.Spline: Points Array does not contain valid Point objects.");}throw Error("fx.Spline: Type Array expected for argument points");
};fx.Spline.IsSpline=function(a){return a instanceof fx.Spline};fx.Vector2=function(a,b){if(!(this instanceof arguments.callee))throw Error("Constructor called as a function");this.reset(a,b)};
fx.Vector2.prototype={add:function(a){this.x+=a.x;this.y+=a.y;return this},subtract:function(a){this.x-=a.x;this.y-=a.y;return this},multiply:function(a){this.x*=a;this.y*=a;return this},divide:function(a){this.x/=a;this.y/=a;return this},reverse:function(){this.x=-this.x;this.y=-this.y;return this},copyTo:function(a){a.x=this.x;a.y=this.y},copyFrom:function(a){this.x=a.x;this.y=a.y},reset:function(a,b){this.x=a||0;this.y=b||0;return this},normalize:function(){var a=1/this.magnitude();this.x*=a;this.y*=
a;return this},project:function(a){var b=this.dot(a)/a.dot(a);return a.multiply(b)},perpendicular:function(a){return this.subtract(this.project(a))},angleBetween:function(a,b){return Math.acos(this.dot(a)/(this.magnitude()*a.magnitude()))*(b?1:fx.Vector2.TO_DEGREES)},angle:function(a){return Math.atan2(this.y,this.x)*(a?1:fx.Vector2.TO_DEGREES)},rotate:function(a,b){var c=Math.cos(a*(b?1:fx.Vector2.TO_RADIANS)),d=Math.sin(a*(b?1:fx.Vector2.TO_RADIANS)),e=this.x,f=this.y;this.x=e*c-f*d;this.y=e*d+
f*c;return this},dot:function(a){return this.x*a.x+this.y*a.y},magnitude:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},distanceTo:function(a){var b=a.x-this.x,a=a.y-this.y;return Math.sqrt(b*b+a*a)},round:function(){this.x|=0;this.y|=0},equals:function(a){return this.x===a.x&&this.y===a.y},clone:function(){return new fx.Vector2(this.x,this.y)},draw:function(a){a.save();a.lineWidth=2;a.beginPath();a.moveTo(0,0);a.lineTo(this.x,this.y);a.strokeStyle="rgba(0, 0, 0, 0.25)";a.stroke();a.closePath();
a.translate(this.x,this.y);var b="x: "+this.x.toFixed(2)+", y: "+this.y.toFixed(2)+", mag: "+this.magnitude().toFixed(0);a.fillText(b,5,2);a.closePath();a.beginPath();a.rotate(this.angle(!0));a.moveTo(0,0);a.lineTo(-10,10);a.moveTo(0,0);a.lineTo(-10,-10);a.strokeStyle="rgba(0, 0, 0, 0.25)";a.stroke();a.closePath();a.fillText(this.angle().toFixed(1)+"\u00b0",-50,-5);a.restore();return this},toString:function(){return"[Vector2] x: "+this.x.toFixed(2)+", y: "+this.y.toFixed(2)+", magnitude: "+this.magnitude().toFixed(2)+
", angleDeg: "+this.angle().toFixed(2)}};fx.Vector2.AngleToVector2=function(a,b,c){var d=Math.cos(a*(c?1:fx.Vector2.TO_RADIANS))*b,a=Math.sin(a*(c?1:fx.Vector2.TO_RADIANS))*b;return new fx.Vector2(d,a)};fx.Vector2.Distance=function(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)};fx.Vector2.Zero=function(){return new fx.Vector2(0,0)};fx.Vector2.FromPoint=function(a){return new fx.Vector2(a.x,a.y)};fx.Vector2.isVector2=function(a){return a instanceof fx.Vector2};fx.Vector2.TO_DEGREES=180/Math.PI;
fx.Vector2.TO_RADIANS=Math.PI/180;fx.Range=function(a,b){this.start=a||0;this.end=b||1};
fx.Range.prototype={map:function(a){this.start*=a;this.end*=a;return this},getPercentOfValue:function(a){return 100*((a-this.start)/(this.end-this.start))},getValueOfPercent:function(a){return(this.end-this.start)/100*a+this.start},inRange:function(a){return this.start<this.end?a>=this.start&&a<=this.end:a<=this.start&&a>=this.end},reset:function(a,b){this.start=a;this.end=b},getMin:function(){return Math.min(this.start,this.end)},getMax:function(){return Math.max(this.start,this.end)},clone:function(){return new fx.Range(this.start,
this.end)},equals:function(a){return this.start===a.start&&this.end===a.end},toString:function(){return"[Range] start: "+this.start+", end: "+this.end}};fx.Renderer=function(a){if(!window.performance.now)throw Error("fx.Renderer depends on the window.performance.now() polyfill.");if(!window.requestAnimationFrame||!window.cancelAnimationFrame)throw Error("fx.Renderer depends on requestAnimationFrame / cancelAnimationFrame polyfill.");var b=!1,c=0;that=this;this.frame=0;this.ms=Infinity;this.MIN_DELTA=160;this.start=function(){b||(c=0,b=!0,that.frame=requestAnimationFrame(a))};this.stop=function(){b&&(b=!1,cancelAnimationFrame(that.frame))};this.update=
function(){if(!b)return!1;var d=performance.now();this.ms=d-c;c=d;this.frame=requestAnimationFrame(a)};this.toggle=function(){if(b)return this.stop(),!1;this.start();return!0};this.getFps=function(){return Infinity===this.ms?Infinity:Math.round(1E3/this.ms)};this.isRendering=function(){return b};this.pauseOnBlur=function(a){window.addEventListener||console.warn("fx.Renderer: addEventListener not supported.");a?(window.addEventListener("focus",this.start,!1),window.addEventListener("blur",this.stop,
!1)):(window.removeEventListener("focus",this.start,!1),window.removeEventListener("blur",this.stop,!1))}};fx.RidgidBody=function(a,b,c,d){this.p=new fx.geom.Vector2(a||0,b||0);this.velocity=new fx.geom.Vector2(c||0,d||0);this.r=this.m=10;this.cr=0.5;this.rotation=0};
fx.RidgidBody.prototype={setElement:function(a){this.el=a;this.el.x=this.p.x;this.el.y=this.p.y},update:function(a,b,c){this.velocity.y+=a*b;this.p.x+=this.velocity.x*b*c;this.p.y+=this.velocity.y*b*c;this.el.rotation+=this.velocity.x;this.el.x=this.p.x;this.el.y=this.p.y},collide:function(a){var b,c,d,e,f,g=new fx.geom.Vector2(this.p.x-a.p.x,this.p.y-a.p.y);b=this.r+a.r;c=g.length();c>b||(f=this.m+a.m,g.normalize(),b=new fx.geom.Vector2(g.y,-g.x),c=g.multiply(this.r+a.r-c),this.p.add(c.multiply(a.m/
f)),a.p.add(c.multiply(-this.m/f)),e=Math.min(this.cr,a.cr),c=g.multiply(this.velocity.dot(g)).length(),d=g.multiply(a.velocity.dot(g)).length(),this.velocity=b.multiply(this.velocity.dot(b)),this.velocity.add(g.multiply((e*a.m*(d-c)+this.m*c+a.m*d)/f)),a.velocity=b.multiply(a.velocity.dot(b)),a.velocity.add(g.multiply((e*this.m*(c-d)+a.m*d+this.m*c)/f)))}};fx.World=function(a,b,c){this.scale=c||1;this.width=a*this.scale;this.height=b*this.scale;this.gravity=9.81;this.ppm=30;this.TL={x:0,y:0};this.TC={x:this.width/2,y:0};this.TR={x:this.width,y:0};this.ML={x:0,y:this.height/2};this.CENTER={x:this.width/2,y:this.height/2};this.MR={x:this.width,y:this.height/2};this.BL={x:0,y:this.height};this.BC={x:this.width/2,y:this.height};this.BR={x:this.width,y:this.height}};fx.World.Distance=function(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)};fx.Oscillator=function(a,b,c,d){this.start=a||0;this.end=b||1;this.step=c||0.1;this.reverse=d;this.easing=easing;this.value=a;void 0===this.reverse&&(this.reversed=!1)};
fx.Oscillator.prototype={update:function(){this.value+=this.step;this.value>=this.end?this.reverse?this.step=-this.step:this.reset():this.value<=this.start&&(this.step=Math.abs(this.step),this.value=this.start)},hasNext:function(){return this.reverse?!0:this.value+this.step<=this.end},toRange:function(){return new fx.Range(this.min,this.max)},getNumSteps:function(){return Math.abs(this.end-this.start)/this.step},reset:function(){this.value=this.start},toString:function(){return"[Oscillator] value: "+
this.value.toFixed(2)+", start: "+this.start+", end: "+this.end+", step: "+this.step+", numSteps: "+this.getNumSteps().toFixed(2)+", reverse: "+this.reverse}};fx.Timer=function(a,b){if("[object Array]"===Object.prototype.toString.apply(a)){if(2!==a.length)throw Error("Parameter 'Time' used as random range must contain excactly two numericla values: start and end");if("[object Number]"!==Object.prototype.toString.apply(a[0])||"[object Number]"!==Object.prototype.toString.apply(a[1]))throw Error("Time parameter 'mix' and 'mix' must be numerical");this.min=a[0];this.max=a[1];this.isRandomize=!0}else if("[object Number]"===Object.prototype.toString.apply(a))this.time=
a;else throw Error("Accepted values for parameter 'time' are Number and Array.");if(!b)throw Error("Missing required parameter 'notify'.");this.notify=b;this.tick=this.id=0;this.paused=this.running=!1;this.context=this;var c=this;this._getRndInterval=function(){return this.min+Math.random()*(this.max-this.min)};this._onNotify=function(){c.notify?c.notify.call(c.context):console.warn("fx.Timer has completed its countdown but the notify callback is null");c.tick++;c.isRandomize&&(clearTimeout(c.id),
c.id=setTimeout(c._onNotify,c._getRndInterval()))}};
fx.Timer.prototype={start:function(){if(this.running||this.paused)return this;this.running=!0;this.id=this.isRandomize?setTimeout(this._onNotify,this._getRndInterval()):setInterval(this._onNotify,this.time);return this},stop:function(){if(!this.running)return this;clearInterval(this.id);clearTimeout(this.id);this.paused=this.running=!1;return this},pause:function(){if(this.paused||!this.running)return this;this.paused=!0;clearInterval(this.id);clearTimeout(this.id);return this},resume:function(){if(!this.paused)return this;
this.paused=!1;this.running&&(this.id=this.isRandomize?setTimeout(this._onNotify,this._getRndInterval()):setInterval(this._onNotify,this.time));return this},reset:function(){this.tick=0;return this},bind:function(a){this.context=a;return this},destroy:function(){this.stop();this.context=this.notify=null},toString:function(){var a;a="[Timer] time: "+(this.isRandomize?this.min+"-"+this.max:this.time);return a+=", running: "+this.running+", paused: "+this.paused+", tick: "+this.tick}};fx.RAFTimer=function(a,b,c){if(!window.requestAnimationFrame||!window.cancelAnimationFrame)throw Error("requestAnimationFrame and cancelAnimationFrame are required for RAFTimer.");if(a){if(isNaN(a))throw Error("Parameter 'duration' is not a Number.");if(!b)throw Error("Missing required parameter 'notify'.");}else throw Error("Missing required parameter 'duration'.");window.performance=window.performance||{};performance.now=performance.now||performance.webkitNow||performance.mozNow||performance.msNow||
performance.oNow;performance.now?this.usePresicionTimer=!0:(performance.now=function(){return(new Date).getTime()},this.usePresicionTimer=!1);this.duration=a;this.notify=b;this.useFrames=c||!1;this.requestId=0;this.paused=this.running=!1;this.ms=Infinity;this.tick=this.currentFrame=this.currentTime=0;this.maxDeltaTime=160;var d,e=this;this._callback=function(){e.currentTime=e.duration;e.tick++;e.lastTime=0;e.reset();e.notify&&e.notify.call(e)};this._handleAF=function(){if(e.running&&!e.paused){e.useFrames?
e.currentFrame==e.duration&&e._callback():e.currentTime>=e.duration&&e._callback();var a=performance.now();e.ms=a-(d||a);e.ms>e.maxDeltaTime&&(e.ms=0);d=a;e.currentTime+=e.ms;e.currentFrame++;e.requestId=requestAnimationFrame(e._handleAF)}}};
fx.RAFTimer.prototype={start:function(){!this.running&&!this.paused&&(this.running=!0,this.requestId=requestAnimationFrame(this._handleAF))},stop:function(){this.running&&(this.paused=this.running=!1,this.reset(),cancelAnimationFrame(this.requestId))},pause:function(){!this.paused&&this.running&&(this.paused=!0)},resume:function(){this.paused&&(this.paused=!1,this.requestId=requestAnimationFrame(this._handleAF))},getFormattedTime:function(){return(this.currentTime/1E3).toFixed(2)},reset:function(){this.currentFrame=
this.currentTime=0},rafActive:function(){return ms<this.maxDeltaTime},destroy:function(){this.stop();this.duration=this.notify=null},toString:function(){var a="[RAFTimer] ",a=this.useFrames?a+("duration(frames): "+this.duration+", currentFrame: "+this.currentFrame):a+("duration(ms): "+this.duration+", currentTime: "+this.getFormattedTime()),a=a+(", tick: "+this.tick+", running: "+this.running+", paused: "+this.paused);this.useFrames||(a+=", precisionTimer: "+this.usePresicionTimer);return a}};fx.CanvasUtils={canvasToImage:function(a,b,c,d,e){if(!a)throw new TypeError("Not enough arguments");var f=new Image;f.src=fx.CanvasUtils.getBase64(a,b,c,d,e);return f},copy:function(a,b){if(!a||!b)throw new TypeError("Not enough arguments");b.getContext("2d").putImageData(fx.CanvasUtils.getImageData(a),0,0)},imageDataToImage:function(a,b){if(!a)throw new TypeError("Not enough arguments");var c=fx.CanvasUtils.getCanvas(a.width,a.height);c.getContext("2d").putImageData(a,0,0);if(b)b.src=fx.CanvasUtils.getBase64(c);
else return fx.CanvasUtils.canvasToImage(c);return null},videoToImage:function(a,b,c,d,e){if(!a)throw new TypeError("Not enough arguments");var f=fx.CanvasUtils.getRect(a),b=fx.CanvasUtils.getRect(a,b,c,d,e),c=fx.CanvasUtils.getCanvas(f.width,f.height);c.getContext("2d").drawImage(a,f.x,f.y,f.width,f.height);return fx.CanvasUtils.canvasToImage(c,b.x,b.y,b.width,b.height)},videoToCanvas:function(a,b){if(!a||!b)throw new TypeError("Not enough arguments");b.drawImage(a,0,0,a.width,a.height)},putImage:function(a,
b,c,d,e,f){if(!a||!b)throw new TypeError("Not enough arguments");c=fx.CanvasUtils.getRect(null,c,d,e,f);a.getContext("2d").drawImage(b,c.x,c.y,c.width,c.height)},getBase64:function(a,b,c,d,e){if(!a)throw new TypeError("Not enough arguments");var f=fx.CanvasUtils.getRect(null,0,0,a.width,a.height),g=fx.CanvasUtils.getRect(a,b,c,d,e);f.equals(g)||(a=fx.CanvasUtils.crop(a,b,c,d,e));d=fx.CanvasUtils.getImageData(a,b||0,c||0,d,e);a.getContext("2d").putImageData(d,b||0,c||0);return a.toDataURL()},base64toImage:function(a,
b){if(!a)throw new TypeError("Not enough arguments");if("string"!==typeof a)throw new TypeError("Invalid argument");if(b&&!b instanceof HTMLImageElement)throw new TypeError("Invalid argument");(b||new Image).src=mbase64;return b},crop:function(a,b,c,d,e){if(!a)throw new TypeError("Not enough arguments");var b=parseInt(b,10),c=parseInt(c,10),d=d||a.width,f=e||a.height;isNaN(b)&&(b=0);isNaN(c)&&(c=0);if(0==b&&0==c&&d==a.width&&f==a.height)return fx.CanvasUtils.clone(a);var e=fx.CanvasUtils.getCanvas(d,
f),g=e.getContext("2d"),a=fx.CanvasUtils.getImageData(a,b,c,d,f);g.putImageData(a,0,0);return e},cropImageData:function(a,b,c,d,e){if(!a)throw new TypeError("Not enough arguments");var f=fx.CanvasUtils.getCanvas(a.width,a.height);f.getContext("2d").putImageData(a,0,0);return fx.CanvasUtils.getImageData(f,b,c,d,e)},getImageData:function(a,b,c,d,e){if(!a)throw new TypeError("Not enough arguments");if(!a instanceof HTMLCanvasElement)throw new TypeError("Invalid type "+a);b=parseInt(b,10)||0;c=parseInt(c,
10)||0;d=d||a.width;e=e||a.height;return a.getContext("2d").getImageData(b,c,d,e)},getImageData2:function(a){if(!a)throw new TypeError("Not enough arguments");var b;if(a instanceof HTMLCanvasElement)b=a.getContext("2d"),a=b.getImageData(0,0,a.width,a.height);else if(a instanceof CanvasRenderingContext2D)a=a.getImageData(0,0,a.canvas.width,a.canvas.height);else if(a instanceof HTMLImageElement||a instanceof HTMLVideoElement)b=fx.CanvasUtils.getCanvas(a.width,a.height),b=b.getContext("2d"),b.drawImage(a,
0,0),a=b.getImageData(0,0,a.width,a.height);else throw new TypeError("Invalid arguments");return a},getCanvas:function(a,b){var c=document.createElement("canvas");c.width=a||300;c.height=b||150;return c},clone:function(a){if(!a)throw new TypeError("Not enough arguments");if(!a.width||!a.height)throw new TypeError("Canvas has no properties");var b=fx.CanvasUtils.getCanvas(a.width,a.height),c=b.getContext("2d"),a=a.getContext("2d").getImageData(0,0,a.width,a.height);c.putImageData(a,0,0);return b},
isSupported:function(){var a,b;try{a=document.createElement("canvas"),b=a.getContext("2d")}catch(c){return!1}try{b.getImageData(0,0,1,1)}catch(d){return!1}return!0},getRect:function(a,b,c,d,e){a||(a={width:0,height:0});return{x:parseInt(b,10)||0,y:parseInt(c,10)||0,width:parseInt(d,10)||a.width,height:parseInt(e,10)||a.height,equals:function(a){return a.x==this.x&&a.y==c&&a.width==this.width&&a.height==this.height},toString:function(){return"[Rect] x: "+this.x+", y: "+this.y+", width: "+this.width+
", height: "+this.height}}}};fx.CookieUtils={set:function(a,b){var c=(a+"="+b).toString();return document.cookie=c},get:function(a){return(a=document.cookie.match(a+"=(.*?)(;|$)"))?a[1]:null},"delete":function(a){if(this.has(a)){var b=new Date;b.setTime(b.getTime()-1);document.cookie=a+("=; expires="+b.toGMTString())}},has:function(a){return!!this.get(a)}};fx.Date={daysBetween:function(a,b){return(a.valueOf()-b.valueOf())/1E3/60/60/24},isBefore:function(a,b){return!!(0>this.daysBetween(a,b))},isAfter:function(a,b){return!!(0<this.daysBetween(a,b))},isBetween:function(a,b,c){return!this.isBefore(a,b)&&!this.isAfter(a,c)},today:function(){return new Date},tomorrow:function(){return this.today.setDate(this.today.getDate()+1)},yesterday:function(){return this.today.setDate(this.today.getDate()-1)},getMeridiem:function(a){return 12>a?"AM":"PM"}};fx.DelayCall=function(a,b,c){if(!(this instanceof arguments.callee))throw Error("Constructor called as a function.");if(!b)throw Error("Missing required parameter time.");if(!a)throw Error("Missing required parameter callback.");var c=c||window,d=setTimeout(function(){a&&(a.call(c),a=null)},b);this.cancel=function(){d&&(clearTimeout(d),a=d=null)}};fx.Dom={getElementByPropVal:function(a,b,c){var d=a,e=null;if(fx.isElement(a))d=a.domElement;else if(9==a.nodeType)d=document.body;else if(1!=a.nodeType)throw Error("Unsupported type for element");var f=function(a){a[b]==c&&(e=a);if(e)return e;for(var d=0;d<a.children.length;d++)f(a.children[d])};f(d);return this.toNode(e)},getElementByCSS:function(a,b){var c=a,d=null;fx.isElement(a)&&(c=a.el);var e=function(a){for(var c in b)a.style[c]==b[c]&&(d=a);if(d)return d;for(c=0;c<a.children.length;c++)e(a.children[c])};
e(c);return this.toNode(d)},toNode:function(a){return fx.createElement(a)},find:function(a,b){var c;fx.hasPrefix(b,"#")?c=this.getElementByPropVal(a,"id",b.substring(1,b.length)):fx.hasPrefix(b,":")?c=this.getElementByPropVal(a,"className",b.substring(1,b.length)):"[object Object]"===fx.type(b)&&(c=this.getElementByCSS(a,b));return c},ready:function(a){var b=!1,c=function(){document.addEventListener?document.removeEventListener("DOMContentLoaded",c,!1):"complete"===document.readyState&&(document.detachEvent("onreadystatechange",
c),window.detachEvent("onload",d));d()},d=function(){b||(b=!0,a.call(window))};document.addEventListener?document.addEventListener("DOMContentLoaded",c,!1):document.attachEvent?(document.attachEvent("onreadystatechange",c),window.attachEvent("onload",d)):(window.onload=d,document.body.onload=d)}};fx.Geom={degToRad:function(a){return a*(Math.PI/180)},radToDeg:function(a){return a*(180/Math.PI)},percentToDeg:function(a){return 3.6*a},percentToRad:function(a){return 3.6*a*(Math.PI/180)},radToPercent:function(a){return 100*(a*(180/Math.PI)/360)%100},degToPercent:function(a){return 100*(a/360)%100},distance:function(a,b,c,d){return Math.abs(Math.sqrt((c-a)*(c-a)+(d-b)*(d-b)))},lerp:function(a,b,c){return a+c*(b-a)},lerpPoints:function(a,b,c){return this.getPoint(a.x+c*(b.x-a.x),a.y+c*(b.y-a.y))},
map:function(a,b){return a*b},mapPoint:function(a,b){return this.getPoint(this.map(a.x,b),this.map(a.y,b))},getAngle:function(a,b){return Math.atan((a.y-b.y)/(a.x-b.x))/(Math.PI/180)},getRectanglePerimeter:function(a,b){return 2*a+2*b},getRadian:function(a,b){return Math.atan2(b.y-a.y,b.x-a.x)},getPolar:function(a,b,c){return{x:c*Math.cos(b)+a.x,y:c*Math.sin(b)+a.y}},rotatePoint:function(a,b,c){var c=this.degToRad(c),d=a.x-b.x,a=a.y-b.y;return{x:Math.cos(c)*d-Math.sin(c)*a+b.x,y:Math.sin(c)*d+Math.cos(c)*
a+b.y}},getPointInCircle:function(a,b){return{x:Math.cos(b)*a,y:Math.sin(b)*a}},getCircumferencePoint:function(a,b,c){var a=a-c,b=b-c,d=Math.sqrt(c*c/(1+a*a/(b*b))),c=Math.sqrt(c*c-d*d);return 0<a&&0<b?{x:c,y:d}:0>a&&0>b?{x:-c,y:-d}:0>a&&0<b?{x:-c,y:d}:0<a&&0>b?{x:c,y:-d}:{x:c,y:d}}};fx.Keycode={BACKSPACE:8,TAB:9,ENTER:13,COMMAND:15,SHIFT:16,CONTROL:17,ALTERNATE:18,PAUSE:19,CAPS_LOCK:20,NUMPAD:21,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,NUMBER_0:48,NUMBER_1:49,NUMBER_2:50,NUMBER_3:51,NUMBER_4:52,NUMBER_5:53,NUMBER_6:54,NUMBER_7:55,NUMBER_8:56,NUMBER_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,LEFT_WINDOW_KEY:91,RIGHT_WINDOW_KEY:92,
SELECT_KEY:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_ADD:107,NUMPAD_ENTER:108,NUMPAD_SUBTRACT:109,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,SEMICOLON:186,EQUAL:187,COMMA:188,MINUS:189,PERIOD:190,SLASH:191,BACKQUOTE:192,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221,
QUOTE:222};fx.Math={roundFloat:function(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c},clamp:function(a,b,c){return Math.min(Math.max(c,Math.min(a,b)),Math.max(a,b))},fallsBetween:function(a,b,c){return c>=a&&c<=b},isEven:function(a){return this.isNumber(a)&&0==a%2},isOdd:function(){return this.isNumber(n)&&1==n%2},isNumber:function(a){return a===parseFloat(a)&&"[object Number]"===Object.prototype.toString.apply(a)},random:function(a,b,c){a=a||0;b=b||1;c=c||!1;a=isNaN(a)||isNaN(b)?Math.random():a+Math.random()*
(b-a);return c?a|0:a},randomExclude:function(a,b,c,d,e){var f,a=a||0,b=b||1,c=c||0,d=d||0,e=e||!1;do f=a+Math.random()*(b-a);while(f>c&&f<d);return e?f|0:f}};fx.Mouse={getPos:function(a){var b={x:NaN,y:NaN,event:null},c=a.target,d,e;if(!a||!a.target)return b;a.pageX||a.pageY?(d=a.pageX,e=a.pageY):(d=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e=a.clientY+document.body.scrollTop+document.documentElement.scrollTop);d-=c.offsetLeft;e-=c.offsetTop;b.x=d;b.y=e;b.event=a;0>b.x&&(b.x=0);0>b.y&&(b.y=0);return b},captureTouch:function(a){var b={x:null,y:null,isPressed:!1,event:null},c=document.body.scrollLeft,d=document.documentElement.scrollLeft,
e=document.body.scrollTop,f=document.documentElement.scrollTop,g=a.offsetLeft,h=a.offsetTop;a.addEventListener("touchstart",function(a){b.isPressed=!0;b.event=a},!1);a.addEventListener("touchend",function(a){b.isPressed=!1;b.x=null;b.y=null;b.event=a},!1);a.addEventListener("touchmove",function(a){var l,j;j=a.touches[0];j.pageX||j.pageY?(l=j.pageX,j=j.pageY):(l=j.clientX+c+d,j=j.clientY+e+f);l-=g;j-=h;b.x=l;b.y=j;b.event=a},!1);return b}};fx.Object={getKeys:function(a){var b=[],c;for(c in a)b.push(c);return b},getValues:function(a){var b=[],c;for(c in a)b.push(a[c]);return b},length:function(a){var b=0,c;for(c in a)b++;return b},isEmpty:function(a){return 0===this.length(a)},isObject:function(a){return"[object Object]"===Object.prototype.toString.apply(a)},toString:function(a,b){var c,d,e=0;c=(b?"'"+b+"'":"Object")+" contains "+this.length(a)+" key/value pairs:\n";for(var f in a)d="[object Object]"===Object.prototype.toString.apply(a[f])?
this.isEmpty(a[f])?"Empty [object Object]":this.getKeys(a[f]):a[f],c+="["+e++ +"] "+f+" : "+d+"\n";return c},toHashMap:function(a){var b=[],c;for(c in a)b[c]=a[c];return b},toArray:function(a){var b=[],c;for(c in a)b.push(c),b.push(a[c]);return b},toMultidimensionalArray:function(a){var b=[],c;for(c in a)b.push([c,a[c]]);return b},clone:function(a){var b={},c;for(c in a)b[c]=a[c];return b}};fx.Percent={of:function(a,b){return b*(a/100)},from:function(a,b){return 100*(a/b)},decimalToPercent:function(a){return 100*a},rangeToPercent:function(a,b,c){return 100*((c-a)/(b-a))},rangeToDecimal:function(a,b,c){return(b-a)/100*c}};fx.QueryString={get:function(a){a="[\\?&]"+a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]")+"=([^&#]*)";return(a=RegExp(a).exec(window.location.search))?decodeURIComponent(a[1].replace(/\+/g," ")):null},has:function(a){return!!this.get(a)}};fx.String={trim:function(a){return a.replace(/^\s*/,"").replace(/\s*$/,"")},startsWith:function(a,b){return this.isEmpty(a)?!1:0==a.indexOf(b)},endsWith:function(a,b){return this.isEmpty(a)||this.isEmpty(b)?!1:a.lastIndexOf(b)==a.length-b.length},isEmpty:function(a){return this.isString&&0<a.length},isString:function(){return"[object String]"===Object.prototype.toString.apply(o)},isDigit:function(a){this.isString(a)||(a=a.toString());return a.test(/^\d*$/)},contains:function(a,b){return b&&-1!=b.indexOf(a)},
removeWhitespace:function(a){return this.isEmpty(a)?a:a.replace(/\s/g,"")},insertAt:function(a,b,c){return a.substring(0,c)+b+a.substring(c)},toTitleCase:function(a){if(this.isEmpty(a))return a;var b=a.substring(0,1).toUpperCase();1<a.length&&(b+=a.substring(1));return b},formatNumber:function(a){for(var a=a.toString(),b=a.split("."),a=b[0],b=1<b.length?"."+b[1]:"",c=/(\d+)(\d{3})/;c.test(a);)a=a.replace(c,"$1,$2");return a+b},cacheBuster:function(a,b){return b?a:a+"?noCache="+Math.round(1E5*Math.random()*
(new Date).getMilliseconds())},catches:function(a,b,c){c=3<=arguments.length?c:!1;b=this.trim(b);b=b.replace(/\s+/,"*");b=b.replace(/\*/,".*?");b=b.replace(/\?/,".{0,1}");return RegExp("^"+b,c?"i":"").test(a)},toTimeCode:function(a){var b=Math.floor(a/3600),c=Math.floor(a%3600/60),a=Math.floor(a%3600%60);return(0==b?"":10>b?"0"+b.toString()+":":b.toString()+":")+(10>c?"0"+c.toString():c.toString())+":"+(10>a?"0"+a.toString():a.toString())}};fx.System={touch:function(){return"createTouch"in document},canvas:function(){try{return!!document.createElement("canvas").getContext}catch(a){return!1}},webgl:function(){if(!this.canvas())return!1;for(var a=["webgl","experimental-webgl","moz-webgl","webkit-3d"],b=document.createElement("canvas"),c,d=0;d<a.length;d++)try{if(c=b.getContext(a[d]))return!0}catch(e){}return!1},html5Video:function(){return!!document.createElement("video").canPlayType},html5VideoSupportedType:function(){if(!this.html5Video)return{result:"HTML5 video is unsupported"};
for(var a={},b="video/webm; video/ogg; video/mp4; video/3gp; video/avi; video/mpeg4;".split(" "),c=document.createElement("video"),d=0;d<b.length;d++){var e=c.canPlayType(b[d]);a[b[d]]=e}return a},html5Audio:function(){return!!document.createElement("audio").canPlayType},localStorage:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}},webWorkers:function(){return!!window.Worker},geoLocation:function(){return!!("geolocation"in navigator)},applicationCache:function(){return!!window.applicationCache},
history:function(){return!(!window.history||!history.pushState)},getUserMedia:function(){return!(!navigator.getUserMedia&&!navigator.webkitGetUserMedia&&!navigator.mozGetUserMedia&&!navigator.msGetUserMedia)},performanceNow:function(){return!!window.performance.now}};fx.Type={get:function(a){return void 0===a?"[object Undefined]":null===a?"[object Null]":Object.prototype.toString.apply(a)},isObject:function(a){return"[object Object]"===this.get(a)},isArray:function(a){return"[object Array]"===this.get(a)},isFunction:function(a){return"[object Function]"===this.get(a)},isString:function(a){return"[object String]"===this.get(a)},isNumber:function(a){return"[object Number]"===this.get(a)},isBoolean:function(a){return"[object Boolean]"===this.get(a)},isUndefined:function(a){return"[object Undefined]"===
this.get(a)},isNull:function(a){return"[object Null]"===this.get(a)}};fx.Uri={isUrl:function(a){return 0===a.indexOf("http")||0===a.indexOf("www")},getExtension:function(a){a=this.parse(a).source;a=a.substring(a.lastIndexOf(".")+1,a.length);return this.stripQueryString(a)},stripExtension:function(a){if(this.isUrl(a))if(parsedUrl=this.parse(a),parsedUrl.file)a=parsedUrl.file;else return"";return a.split(".")[0]},stripQueryString:function(a){return decodeURIComponent(a).split("?")[0]},getFileName:function(a){return this.stripQueryString(this.parse(a).file)},parseHashTag:function(){var a,
b,c;a={};b=window.location.hash;b=b.replace("#","");c=b.split("/");a.hash=b;a.parts=[];a.length=c.length;for(b=0;b<c.length;b++)a.parts[b]=c[b];return a},parse:function(a){for(var a=a||window.location,b="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(a),
c={},d=14;d--;)c[b[d]]=a[d]||"";c.queryKey={};c[b[12]].replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,b,d){b&&(c.queryKey[b]=d)});return c},toUri:function(a){var b="";a.protocol&&(b+=a.protocol+"://");a.user&&(b+=a.user);a.password&&(b+=":"+a.password);if(a.user||a.password)b+="@";a.host&&(b+=a.host);a.port&&(b+=":"+a.port);a.path&&(b+=a.path);var c=a.queryKey,d=[];for(k in c)if(c.hasOwnProperty(k)){var e=encodeURIComponent(c[k]);k=encodeURIComponent(k);e?d.push(k+"="+e):d.push(k)}0<d.length&&(b+=
"?"+d.join("&"));a.anchor&&(b+="#"+a.anchor);return b}};fx.Viewport={width:function(a){return this.dimensions(a).width},height:function(a){return this.dimensions(a).height},dimensions:function(a){function b(b){return Math.max(a.body["scroll"+b]||0,a.body["offset"+b]||0,c["scroll"+b]||0,c["offset"+b]||0,c["client"+b]||0)}var a=a||window.document,c=a.documentElement;return{width:b("Width"),height:b("Height")}}};
